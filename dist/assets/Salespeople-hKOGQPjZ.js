import{j as e,u as oe,r as l,B as p,S as i,t as o,o as Ue,N as Re,C as _,b as D,s as W}from"./index-B6hbsc4X.js";import{D as O,e as T,f as z,g as U,A as me,a as xe,B as V,M as q,P as Z,U as w,F as he,b as Fe,i as Ke}from"./AppLayout-y_XY-3Je.js";import{P as Me}from"./progress-DqTp4kwO.js";import{S as Y,a as ee,b as se,c as ae,d as E,L,I as X}from"./select-CnNyzaAZ.js";import{U as Ee,D as Ie,a as Ve,b as qe,c as M}from"./ThemeToggle-D_cdWEBW.js";import{A as ue,a as je,b as pe,c as ge,d as fe,e as Ne,f as ve,g as ye}from"./alert-dialog-p49H-UKX.js";import{u as Ze}from"./useSalespeople-Dnf3NDvo.js";import{u as Be}from"./useRegions-1dhih84-.js";import{M as He}from"./map-pin-7kmCCSkx.js";import{T as be}from"./trending-up-0yhGGB0M.js";import{T as we,a as ke,b as I,c as v,d as Ce,e as y}from"./table-CHk-b2FV.js";import{d as Qe,a as $e,g as Je}from"./useLeads-R3UqiIDn.js";import{P as de,E as Ge}from"./plus-Kk0QOdRI.js";import{B as Se}from"./building-2-BOz2iFmf.js";import{T as _e}from"./trash-2-COiQ811e.js";import{b as We}from"./useClients-C1EBftGZ.js";import"./demoData-tljgfLqM.js";function Xe({salesperson:t,open:c,onOpenChange:d}){return t?e.jsx(O,{open:c,onOpenChange:d,children:e.jsxs(T,{className:"sm:max-w-[500px]",children:[e.jsx(z,{children:e.jsx(U,{children:"Profil obchodníka"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"h-20 w-20 bg-primary/10",children:e.jsx(xe,{className:"bg-primary/10 text-primary text-xl font-medium",children:t.full_name?.split(" ").map(h=>h[0]).join("").toUpperCase()||"?"})}),e.jsx("span",{className:`absolute bottom-0 right-0 h-4 w-4 rounded-full border-2 border-card ${t.is_active?"bg-success":"bg-muted-foreground"}`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:t.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.region?.name||"Neurčený región"}),e.jsx(V,{variant:t.is_active?"success":"secondary",className:"mt-2",children:t.is_active?"Aktívny":"Neaktívny"})]})]}),e.jsxs("div",{className:"space-y-3 border-y border-border py-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(q,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:t.phone})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(He,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:t.region?.name||"Neurčený región"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted/50",children:[e.jsx(w,{className:"h-5 w-5 text-primary mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-semibold text-foreground",children:t.stats?.leads||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leady"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted/50",children:[e.jsx(w,{className:"h-5 w-5 text-success mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-semibold text-foreground",children:t.stats?.clients||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Klienti"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted/50",children:[e.jsx(he,{className:"h-5 w-5 text-info mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-semibold text-foreground",children:t.stats?.quotes||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ponuky"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-primary/5 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Konverzná miera"})]}),e.jsxs("span",{className:"text-xl font-semibold text-primary",children:[t.stats?.conversionRate||0,"%"]})]})]})]})}):null}const Ye={new:"Nový",waiting:"Čakajúci",contacted:"Kontaktovaný",offer:"Ponuka",won:"Uzavretý",lost:"Stratený"},es={new:"secondary",waiting:"secondary",contacted:"info",offer:"warning",won:"success",lost:"destructive"};function ss({salespersonId:t,salespersonName:c,open:d,onOpenChange:h}){const{user:k}=oe(),u=k?.role==="admin"||k?.role==="manager",{data:m,isLoading:C}=Qe(),r=$e(),R=Je(),[B,x]=l.useState(!1),[g,P]=l.useState(""),[f,S]=l.useState(null),j=m?.filter(a=>a.assigned_user_id===t)||[],b=m?.filter(a=>!a.assigned_user_id)||[],F=async()=>{if(!(!t||!g))try{await r.mutateAsync({leadId:g,userId:t}),o.success("Lead bol priradený"),x(!1),P("")}catch{o.error("Nepodarilo sa priradiť lead")}},K=async()=>{if(f)try{await R.mutateAsync(f),o.success("Priradenie zrušené"),S(null)}catch{o.error("Nepodarilo sa zrušiť priradenie")}};return e.jsxs(e.Fragment,{children:[e.jsx(O,{open:d,onOpenChange:h,children:e.jsxs(T,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[e.jsx(z,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(U,{children:["Leady - ",c]}),u&&b.length>0&&e.jsxs(p,{size:"sm",onClick:()=>x(!0),children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Priradiť lead"]})]})}),C?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>e.jsx(i,{className:"h-16 w-full"},a))}):j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Žiadne priradené leady"}),u&&b.length>0&&e.jsxs(p,{className:"mt-4",onClick:()=>x(!0),children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Priradiť prvý lead"]})]}):e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Celkom ",j.length," ",j.length===1?"lead":j.length<5?"leady":"leadov"]}),e.jsxs(we,{children:[e.jsx(ke,{children:e.jsxs(I,{children:[e.jsx(v,{children:"Kontakt"}),e.jsx(v,{children:"Informácie"}),e.jsx(v,{children:"Status"}),u&&e.jsx(v,{className:"w-12"})]})}),e.jsx(Ce,{children:j.map(a=>e.jsxs(I,{children:[e.jsx(y,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:a.contact_name}),a.company_name&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(Se,{className:"h-3 w-3"}),a.company_name]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[a.email&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[180px]",children:a.email})]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsx("span",{children:a.phone})]})]})}),e.jsx(y,{children:e.jsx(V,{variant:es[a.status],children:Ye[a.status]})}),u&&e.jsx(y,{children:e.jsx(p,{variant:"ghost",size:"icon-sm",onClick:()=>S(a.id),children:e.jsx(_e,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})})]},a.id))})]})]})]})}),e.jsx(O,{open:B,onOpenChange:x,children:e.jsxs(T,{className:"sm:max-w-[500px]",children:[e.jsx(z,{children:e.jsxs(U,{children:["Priradiť lead pre ",c]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[b.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Žiadne nepriradené leady"}):e.jsx("div",{className:"space-y-2",children:e.jsxs(Y,{value:g,onValueChange:P,children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Vyberte lead"})}),e.jsx(ae,{children:b.map(a=>e.jsx(E,{value:a.id,children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:a.contact_name}),a.company_name&&e.jsxs("span",{className:"text-muted-foreground",children:[" (",a.company_name,")"]})]})},a.id))})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(p,{variant:"outline",onClick:()=>x(!1),children:"Zrušiť"}),e.jsx(p,{onClick:F,disabled:!g||r.isPending,children:"Priradiť"})]})]})]})}),e.jsx(ue,{open:!!f,onOpenChange:()=>S(null),children:e.jsxs(je,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Zrušiť priradenie?"}),e.jsx(fe,{children:"Naozaj chcete zrušiť priradenie tohto leadu? Lead zostane v systéme, ale nebude priradený žiadnemu obchodníkovi."})]}),e.jsxs(Ne,{children:[e.jsx(ve,{children:"Zrušiť"}),e.jsx(ye,{onClick:K,children:"Potvrdiť"})]})]})})]})}const as={active:"Aktívny",inactive:"Neaktívny",prospect:"Potenciálny",completed:"Ukončená spolupráca"},ts={active:"success",inactive:"secondary",prospect:"info",completed:"completed"};function rs({salespersonId:t,salespersonName:c,open:d,onOpenChange:h}){const{data:k,isLoading:u}=We(),m=k?.filter(r=>r.assigned_user_id===t)||[],C=r=>new Intl.NumberFormat("sk-SK",{style:"currency",currency:"EUR"}).format(r||0);return e.jsx(O,{open:d,onOpenChange:h,children:e.jsxs(T,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[e.jsx(z,{children:e.jsxs(U,{children:["Klienti - ",c]})}),u?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(r=>e.jsx(i,{className:"h-16 w-full"},r))}):m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Žiadni priradení klienti"})]}):e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Celkom ",m.length," ",m.length===1?"klient":m.length<5?"klienti":"klientov"]}),e.jsxs(we,{children:[e.jsx(ke,{children:e.jsxs(I,{children:[e.jsx(v,{children:"Klient"}),e.jsx(v,{children:"Kontakt"}),e.jsx(v,{children:"Status"}),e.jsx(v,{className:"text-right",children:"Hodnota"})]})}),e.jsx(Ce,{children:m.map(r=>e.jsxs(I,{children:[e.jsx(y,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:r.contact_name}),r.company_name&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(Se,{className:"h-3 w-3"}),r.company_name]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[r.email&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:r.email})]}),r.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsx("span",{children:r.phone})]})]})}),e.jsx(y,{children:e.jsx(V,{variant:ts[r.status],children:as[r.status]})}),e.jsx(y,{className:"text-right font-medium",children:C(r.total_value)})]},r.id))})]})]})]})})}const ls={admin:"Administrátor",manager:"Manažér",sales:"Obchodník"};function ws(){const{user:t}=oe(),c=Ue(),[d,h]=l.useState(null),[k,u]=l.useState(!1),[m,C]=l.useState(!1),[r,R]=l.useState(!1),[B,x]=l.useState(!1),[g,P]=l.useState(""),[f,S]=l.useState(""),[j,b]=l.useState(""),[F,K]=l.useState("sales"),[a,te]=l.useState(void 0),[H,re]=l.useState(!1),[De,Q]=l.useState(!1),[$,le]=l.useState(null),[J,ne]=l.useState(!1);if(t?.role==="sales")return e.jsx(Re,{to:"/dashboard",replace:!0});const{data:ie,isLoading:A}=Ze(),{data:Pe}=Be(),G=t?.role==="admin",N=G?ie:ie?.filter(s=>s.region_id===t?.regionId),Ae=N?.length?Math.round(N.reduce((s,n)=>s+(n.stats?.conversionRate||0),0)/N.length):0,Le=N?.reduce((s,n)=>s+(n.stats?.quotes||0),0)||0,Oe=N?.reduce((s,n)=>s+(n.stats?.clients||0),0)||0,Te=async()=>{if(!g||!f||!j){o.error("Vyplňte všetky povinné polia");return}if(f.length<6){o.error("Heslo musí mať aspoň 6 znakov");return}re(!0);try{const{data:{session:s}}=await W.auth.getSession();if(!s){o.error("Nie ste prihlásený");return}const{data:n,error:ce}=await W.functions.invoke("create-user",{body:{email:g,password:f,full_name:j,role:F,region_id:a||null}});if(ce)throw ce;if(n?.error)throw new Error(n.error);o.success("Nový používateľ bol úspešne vytvorený"),x(!1),P(""),S(""),b(""),K("sales"),te(void 0),setTimeout(()=>{c.invalidateQueries({queryKey:["salespeople"]}),c.invalidateQueries({queryKey:["allUsers"]})},500)}catch(s){console.error("Error creating user:",s),o.error(s.message||"Nepodarilo sa vytvoriť používateľa")}finally{re(!1)}},ze=async()=>{if($){ne(!0);try{const{error:s}=await W.rpc("delete_user_by_id",{user_id_to_delete:$.id});if(s)throw s;o.success("Používateľ bol úspešne odstránený"),Q(!1),le(null),setTimeout(()=>{c.invalidateQueries({queryKey:["salespeople"]}),c.invalidateQueries({queryKey:["allUsers"]})},500)}catch(s){console.error("Error deleting user:",s),o.error(s.message||"Nepodarilo sa odstrániť používateľa")}finally{ne(!1)}}};return e.jsxs(Fe,{title:"Obchodníci",children:[e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-display font-semibold tracking-tight",children:"Tím obchodníkov"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Prehľad výkonnosti a aktivít"})]}),G&&e.jsxs(p,{onClick:()=>x(!0),children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Pridať obchodníka"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(_,{className:"shadow-soft",children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(w,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Celkom obchodníkov"}),A?e.jsx(i,{className:"h-8 w-12 mt-1"}):e.jsx("p",{className:"text-2xl font-semibold",children:N?.length||0})]})]})})}),e.jsx(_,{className:"shadow-soft",children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-success/10",children:e.jsx(be,{className:"h-5 w-5 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Priemerná konverzia"}),A?e.jsx(i,{className:"h-8 w-16 mt-1"}):e.jsxs("p",{className:"text-2xl font-semibold",children:[Ae,"%"]})]})]})})}),e.jsx(_,{className:"shadow-soft",children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-info/10",children:e.jsx(he,{className:"h-5 w-5 text-info"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktívne ponuky"}),A?e.jsx(i,{className:"h-8 w-12 mt-1"}):e.jsx("p",{className:"text-2xl font-semibold",children:Le})]})]})})}),e.jsx(_,{className:"shadow-soft",children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-warning/10",children:e.jsx(w,{className:"h-5 w-5 text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Celkom klientov"}),A?e.jsx(i,{className:"h-8 w-12 mt-1"}):e.jsx("p",{className:"text-2xl font-semibold",children:Oe})]})]})})})]}),A?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:4}).map((s,n)=>e.jsx(_,{className:"shadow-soft",children:e.jsxs(D,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(i,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{children:[e.jsx(i,{className:"h-5 w-32 mb-2"}),e.jsx(i,{className:"h-4 w-24"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx(i,{className:"h-4 w-full"}),e.jsx(i,{className:"h-4 w-3/4"})]}),e.jsx(i,{className:"h-12 w-full"})]})},n))}):N?.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Žiadni obchodníci"})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:N?.map(s=>e.jsx(_,{className:"shadow-soft hover:shadow-md transition-shadow",children:e.jsxs(D,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"h-12 w-12 bg-primary/10",children:e.jsx(xe,{className:"bg-primary/10 text-primary font-medium",children:s.full_name?.split(" ").map(n=>n[0]).join("").toUpperCase()||"?"})}),e.jsx("span",{className:`absolute bottom-0 right-0 h-3 w-3 rounded-full border-2 border-card ${s.is_active?"bg-success":"bg-muted-foreground"}`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.region?.name||"Neurčený"})]})]}),e.jsxs(Ie,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon-sm",children:e.jsx(Ge,{className:"h-4 w-4"})})}),e.jsxs(qe,{align:"end",children:[e.jsx(M,{onClick:()=>{h(s),u(!0)},children:"Zobraziť profil"}),e.jsx(M,{onClick:()=>{h(s),C(!0)},children:"Zobraziť leady"}),e.jsx(M,{onClick:()=>{h(s),R(!0)},children:"Zobraziť klientov"}),G&&e.jsxs(M,{onClick:()=>{le(s),Q(!0)},className:"text-destructive focus:text-destructive",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Odstrániť"]})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 py-4 border-y border-border",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-foreground",children:s.stats?.leads||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leady"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-foreground",children:s.stats?.clients||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Klienti"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-foreground",children:s.stats?.quotes||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ponuky"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Plnenie cieľa"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.stats?.targetProgress||0,"%"]})]}),e.jsx(Me,{value:s.stats?.targetProgress||0,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(V,{variant:s.is_active?"success":"secondary",className:"text-xs",children:s.is_active?"Aktívny":"Neaktívny"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Konverzia: ",s.stats?.conversionRate||0,"%"]})]})]})},s.id))})]}),e.jsx(Xe,{salesperson:d,open:k,onOpenChange:u}),e.jsx(ss,{salespersonId:d?.id||null,salespersonName:d?.full_name||"",open:m,onOpenChange:C}),e.jsx(rs,{salespersonId:d?.id||null,salespersonName:d?.full_name||"",open:r,onOpenChange:R}),e.jsx(O,{open:B,onOpenChange:x,children:e.jsxs(T,{children:[e.jsx(z,{children:e.jsx(U,{children:"Pridať nového obchodníka"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"create-fullname",children:"Meno a priezvisko *"}),e.jsx(X,{id:"create-fullname",value:j,onChange:s=>b(s.target.value),placeholder:"Jan Novák"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"create-email",children:"Email *"}),e.jsx(X,{id:"create-email",type:"email",value:g,onChange:s=>P(s.target.value),placeholder:"jan.novak@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"create-password",children:"Heslo *"}),e.jsx(X,{id:"create-password",type:"password",value:f,onChange:s=>S(s.target.value),placeholder:"Min. 6 znakov"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"create-role",children:"Rola"}),e.jsxs(Y,{value:F,onValueChange:s=>K(s),children:[e.jsx(ee,{id:"create-role",children:e.jsx(se,{})}),e.jsx(ae,{children:Object.entries(ls).map(([s,n])=>e.jsx(E,{value:s,children:n},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"create-region",children:"Región"}),e.jsxs(Y,{value:a||"none",onValueChange:s=>te(s==="none"?void 0:s),children:[e.jsx(ee,{id:"create-region",children:e.jsx(se,{placeholder:"Vyberte región"})}),e.jsxs(ae,{children:[e.jsx(E,{value:"none",children:"Žiadny región"}),Pe?.map(s=>e.jsx(E,{value:s.id,children:s.name},s.id))]})]})]})]}),e.jsxs(Ke,{children:[e.jsx(p,{variant:"outline",onClick:()=>x(!1),disabled:H,children:"Zrušiť"}),e.jsx(p,{onClick:Te,disabled:H,children:H?"Vytváram...":"Vytvoriť používateľa"})]})]})}),e.jsx(ue,{open:De,onOpenChange:Q,children:e.jsxs(je,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Ste si istý?"}),e.jsxs(fe,{children:["Naozaj chcete odstrániť používateľa ",e.jsx("strong",{children:$?.full_name}),"? Táto akcia je nevratná a odstráni všetky dáta spojené s týmto používateľom."]})]}),e.jsxs(Ne,{children:[e.jsx(ve,{disabled:J,children:"Zrušiť"}),e.jsx(ye,{onClick:ze,disabled:J,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:J?"Odstraňujem...":"Odstrániť"})]})]})})]})}export{ws as default};
