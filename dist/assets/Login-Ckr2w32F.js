import{c as N,r as t,u as Z,a as q,j as e,C as E,b as F,B as l,d as G,e as Q,f as X,t as r}from"./index-B6hbsc4X.js";import{L as m,I as v,S as z,a as I,b as P,c as V,d as n}from"./select-CnNyzaAZ.js";import{u as Y}from"./useRegions-1dhih84-.js";import{T as D,U as ee}from"./ThemeToggle-D_cdWEBW.js";import{C as se}from"./circle-check-big-hCX0GxkI.js";import{E as ae}from"./eye-Db_IDHIm.js";import"./demoData-tljgfLqM.js";const te=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],re=N("arrow-left",te);const ne=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],le=N("eye-off",ne);const ie=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],oe=N("log-in",ie);function ge(){const[a,b]=t.useState("login"),[i,y]=t.useState(""),[o,w]=t.useState(""),[u,k]=t.useState(""),[C,H]=t.useState("sales"),[p,_]=t.useState(""),[j,T]=t.useState(!1),[S,R]=t.useState(!1),[O,L]=t.useState(!1),{login:U,loginWithOAuth:ce,signup:$,setDemoUser:B}=Z(),{data:x,isLoading:h,error:c}=Y(),g=q();console.log("[Login] Regions:",{regions:x,regionsLoading:h,regionsError:c});const K=()=>{if(!i.trim())return"Email je povinný";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))return"Neplatný formát emailu";if(!o)return"Heslo je povinné";if(o.length<6)return"Heslo musí mať aspoň 6 znakov";if(a==="signup"){if(!u.trim())return"Meno je povinné";if(!p)return"Vyberte kraj (región)"}return null},J=async s=>{s.preventDefault();const A=K();if(A){r.error(A);return}if(R(!0),a==="login"){const{error:d}=await U(i,o);d?r.error(d):(r.success("Úspešne prihlásený"),g("/dashboard"))}else{const{error:d,session:W}=await $(i,o,u,C,p);d?r.error(d):W?(r.success("Registrácia úspešná!"),g("/dashboard")):(L(!0),r.success("Registrácia úspešná! Skontrolujte svoj email."))}R(!1)},f=s=>{B(s),r.success(`Demo prihlásenie ako ${s}`),g("/dashboard")},M=()=>{y(""),w(""),k(""),L(!1)};return O?e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 gradient-stone",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(D,{})}),e.jsxs("div",{className:"w-full max-w-md animate-scale-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl gradient-primary shadow-glow mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-primary-foreground",children:"AS"})}),e.jsx("h1",{className:"font-display text-3xl font-semibold text-foreground",children:"ArtStone"})]}),e.jsx(E,{className:"shadow-soft border-border/50",children:e.jsxs(F,{className:"pt-6 text-center",children:[e.jsx(se,{className:"h-16 w-16 text-success mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Registrácia úspešná!"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Na váš email sme odoslali potvrdzovací odkaz. Kliknite naň pre aktiváciu účtu."}),e.jsxs(l,{variant:"outline",onClick:()=>{b("login"),M()},className:"w-full",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Späť na prihlásenie"]})]})})]})]}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 gradient-stone",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(D,{})}),e.jsxs("div",{className:"w-full max-w-md animate-scale-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl gradient-primary shadow-glow mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-primary-foreground",children:"AS"})}),e.jsx("h1",{className:"font-display text-3xl font-semibold text-foreground",children:"ArtStone"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Interný CRM systém"})]}),e.jsxs(E,{className:"shadow-soft border-border/50",children:[e.jsxs(G,{className:"space-y-1",children:[e.jsx(Q,{className:"font-display text-xl",children:a==="login"?"Prihlásenie":"Registrácia"}),e.jsx(X,{children:a==="login"?"Zadajte svoje prihlasovacie údaje":"Vytvorte si nový účet"})]}),e.jsxs(F,{children:[e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[a==="signup"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"fullName",children:"Celé meno"}),e.jsx(v,{id:"fullName",type:"text",placeholder:"Ján Novák",value:u,onChange:s=>k(s.target.value),className:"bg-background",autoComplete:"name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(v,{id:"email",type:"email",placeholder:"vas@email.sk",value:i,onChange:s=>y(s.target.value),className:"bg-background",autoComplete:"email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"password",children:"Heslo"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{id:"password",type:j?"text":"password",placeholder:"••••••••",value:o,onChange:s=>w(s.target.value),className:"bg-background pr-10",autoComplete:a==="login"?"current-password":"new-password"}),e.jsx(l,{type:"button",variant:"ghost",size:"icon-sm",className:"absolute right-1 top-1/2 -translate-y-1/2",onClick:()=>T(!j),children:j?e.jsx(le,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"})})]}),a==="signup"&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimálne 6 znakov"})]}),a==="signup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Rola"}),e.jsxs(z,{value:C,onValueChange:s=>H(s),children:[e.jsx(I,{children:e.jsx(P,{placeholder:"Vyberte rolu"})}),e.jsxs(V,{children:[e.jsx(n,{value:"sales",children:"Obchodník"}),e.jsx(n,{value:"manager",children:"Manažér"}),e.jsx(n,{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Kraj (Región)"}),e.jsxs(z,{value:p,onValueChange:_,disabled:h,children:[e.jsx(I,{children:e.jsx(P,{placeholder:h?"Načítavam...":c?"Chyba pri načítaní":"Vyberte kraj"})}),e.jsx(V,{children:h?e.jsx(n,{value:"loading",disabled:!0,children:"Načítavam regióny..."}):c?e.jsxs(n,{value:"error",disabled:!0,children:["Chyba: ",c.message]}):!x||x.length===0?e.jsx(n,{value:"empty",disabled:!0,children:"Žiadne regióny"}):x.map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]}),c&&e.jsx("p",{className:"text-xs text-destructive",children:"Nepodarilo sa načítať regióny. Skúste obnoviť stránku."})]})]}),e.jsx(l,{type:"submit",className:"w-full",disabled:S,children:S?e.jsx("span",{className:"animate-pulse",children:a==="login"?"Prihlasujem...":"Registrujem..."}):e.jsx(e.Fragment,{children:a==="login"?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Prihlásiť sa"]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Registrovať sa"]})})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",onClick:()=>{b(a==="login"?"signup":"login"),M()},className:"text-sm text-primary hover:underline",children:a==="login"?"Nemáte účet? Registrujte sa":"Už máte účet? Prihláste sa"})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Demo prístup (pre testovanie)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>f("admin"),className:"flex-col h-auto py-3",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Admin"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>f("manager"),className:"flex-col h-auto py-3",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Manažér"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>f("sales"),className:"flex-col h-auto py-3",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Obchodník"})})]})]})]})]}),e.jsx("p",{className:"text-center text-sm text-muted-foreground mt-6",children:"© 2026 ArtStone. Všetky práva vyhradené."})]})]})}export{ge as default};
