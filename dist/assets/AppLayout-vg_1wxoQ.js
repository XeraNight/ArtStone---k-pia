import{c as w,Y as Kt,Z as Xt,$ as _e,a0 as Ut,a1 as ze,o as ge,r as c,a2 as Yt,a3 as Bt,j as a,p as Qt,a4 as Gt,O,J as ee,g as y,u as W,a5 as Jt,B as K,a6 as Zt,F as en,w as tn,q as qe,A as ce,x as T,v as D,y as S,P as $,M as nn,a7 as rn,Q as on,X as an,s as E,S as de,n as sn,E as ln,a as cn,a8 as dn,a9 as un,aa as mn,ab as fn,N as hn}from"./index-lYTtkRVl.js";import{p as pn,l as gn,n as bn,m as xn,F as vn,u as be,j as yn,o as wn,C as kn,U as Sn,D as jn,a as Nn,b as Cn,T as Pn}from"./ThemeToggle-H5MkW5aa.js";const Mn=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],De=w("bell",Mn);const _n=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Dn=w("building",_n);const Rn=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],En=w("check-check",Rn);const An=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Tn=w("chevron-left",An);const On=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Wn=w("circle-question-mark",On);const Ln=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],te=w("file-text",Ln);const In=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],$n=w("folder-open",In);const Fn=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],zn=w("inbox",Fn);const qn=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Hn=w("layout-dashboard",qn);const Vn=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Kn=w("log-out",Vn);const Xn=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Un=w("mail",Xn);const Yn=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Bn=w("menu",Yn);const Qn=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],He=w("package",Qn);const Gn=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Jn=w("phone",Gn);const Zn=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Ve=w("receipt",Zn);const er=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Q=w("search",er);const tr=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nr=w("settings",tr);const rr=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],or=w("user-cog",rr);const ar=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sr=w("user",ar);const ir=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],lr=w("users",ir);var cr=class extends Kt{#t;#r=void 0;#e;#n;constructor(e,t){super(),this.#t=e,this.setOptions(t),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#t.defaultMutationOptions(e),Xt(this.options,t)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#e,observer:this}),t?.mutationKey&&this.options.mutationKey&&_e(t.mutationKey)!==_e(this.options.mutationKey)?this.reset():this.#e?.state.status==="pending"&&this.#e.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#e?.removeObserver(this)}onMutationUpdate(e){this.#o(),this.#a(e)}getCurrentResult(){return this.#r}reset(){this.#e?.removeObserver(this),this.#e=void 0,this.#o(),this.#a()}mutate(e,t){return this.#n=t,this.#e?.removeObserver(this),this.#e=this.#t.getMutationCache().build(this.#t,this.options),this.#e.addObserver(this),this.#e.execute(e)}#o(){const e=this.#e?.state??Ut();this.#r={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){ze.batch(()=>{if(this.#n&&this.hasListeners()){const t=this.#r.variables,n=this.#r.context,r={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#n.onSuccess?.(e.data,t,n,r),this.#n.onSettled?.(e.data,null,t,n,r)):e?.type==="error"&&(this.#n.onError?.(e.error,t,n,r),this.#n.onSettled?.(void 0,e.error,t,n,r))}this.listeners.forEach(t=>{t(this.#r)})})}};function Ke(e,t){const n=ge(),[r]=c.useState(()=>new cr(n,e));c.useEffect(()=>{r.setOptions(e)},[r,e]);const o=c.useSyncExternalStore(c.useCallback(l=>r.subscribe(ze.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=c.useCallback((l,i)=>{r.mutate(l,i).catch(Yt)},[r]);if(o.error&&Bt(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:s,mutateAsync:o.mutate}}function dr(e,t=[]){let n=[];function r(s,l){const i=c.createContext(l);i.displayName=s+"Context";const d=n.length;n=[...n,l];const u=h=>{const{scope:m,children:p,...x}=h,g=m?.[e]?.[d]||i,v=c.useMemo(()=>x,Object.values(x));return a.jsx(g.Provider,{value:v,children:p})};u.displayName=s+"Provider";function f(h,m){const p=m?.[e]?.[d]||i,x=c.useContext(p);if(x)return x;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,f]}const o=()=>{const s=n.map(l=>c.createContext(l));return function(i){const d=i?.[e]||s;return c.useMemo(()=>({[`__scope${e}`]:{...i,[e]:d}}),[i,d])}};return o.scopeName=e,[r,ur(o,...t)]}function ur(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const l=r.reduce((i,{useScope:d,scopeName:u})=>{const h=d(s)[`__scope${u}`];return{...i,...h}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}var mr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=mr.reduce((e,t)=>{const n=Qt(`Primitive.${t}`),r=c.forwardRef((o,s)=>{const{asChild:l,...i}=o,d=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...i,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),ue={exports:{}},me={};var Re;function fr(){if(Re)return me;Re=1;var e=Gt();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function i(h,m){var p=m(),x=r({inst:{value:p,getSnapshot:m}}),g=x[0].inst,v=x[1];return s(function(){g.value=p,g.getSnapshot=m,d(g)&&v({inst:g})},[h,p,m]),o(function(){return d(g)&&v({inst:g}),h(function(){d(g)&&v({inst:g})})},[h]),l(p),p}function d(h){var m=h.getSnapshot;h=h.value;try{var p=m();return!n(h,p)}catch{return!0}}function u(h,m){return m()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:i;return me.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,me}var Ee;function hr(){return Ee||(Ee=1,ue.exports=fr()),ue.exports}var pr=hr();function gr(){return pr.useSyncExternalStore(br,()=>!0,()=>!1)}function br(){return()=>{}}var ve="Avatar",[xr]=dr(ve),[vr,Xe]=xr(ve),Ue=c.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,s]=c.useState("idle");return a.jsx(vr,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:a.jsx(xe.span,{...r,ref:t})})});Ue.displayName=ve;var Ye="AvatarImage",Be=c.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...s}=e,l=Xe(Ye,n),i=yr(r,s),d=O(u=>{o(u),l.onImageLoadingStatusChange(u)});return ee(()=>{i!=="idle"&&d(i)},[i,d]),i==="loaded"?a.jsx(xe.img,{...s,ref:t,src:r}):null});Be.displayName=Ye;var Qe="AvatarFallback",Ge=c.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,s=Xe(Qe,n),[l,i]=c.useState(r===void 0);return c.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>i(!0),r);return()=>window.clearTimeout(d)}},[r]),l&&s.imageLoadingStatus!=="loaded"?a.jsx(xe.span,{...o,ref:t}):null});Ge.displayName=Qe;function Ae(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function yr(e,{referrerPolicy:t,crossOrigin:n}){const r=gr(),o=c.useRef(null),s=r?(o.current||(o.current=new window.Image),o.current):null,[l,i]=c.useState(()=>Ae(s,e));return ee(()=>{i(Ae(s,e))},[s,e]),ee(()=>{const d=h=>()=>{i(h)};if(!s)return;const u=d("loaded"),f=d("error");return s.addEventListener("load",u),s.addEventListener("error",f),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",f)}},[s,n,t]),l}var Je=Ue,Ze=Be,et=Ge;const tt=c.forwardRef(({className:e,...t},n)=>a.jsx(Je,{ref:n,className:y("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));tt.displayName=Je.displayName;const wr=c.forwardRef(({className:e,...t},n)=>a.jsx(Ze,{ref:n,className:y("aspect-square h-full w-full",e),...t}));wr.displayName=Ze.displayName;const nt=c.forwardRef(({className:e,...t},n)=>a.jsx(et,{ref:n,className:y("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));nt.displayName=et.displayName;const kr=[{title:"Dashboard",href:"/dashboard",icon:Hn,roles:["admin","manager","sales"]},{title:"Leady",href:"/leads",icon:zn,roles:["admin","manager","sales"]},{title:"Klienti",href:"/clients",icon:lr,roles:["admin","manager","sales"]},{title:"Obchodníci",href:"/salespeople",icon:or,roles:["admin","manager"]},{title:"Cenové ponuky",href:"/quotes",icon:te,roles:["admin","manager","sales"]},{title:"Faktúry",href:"/invoices",icon:Ve,roles:["admin","manager"]},{title:"Sklad",href:"/inventory",icon:He,roles:["admin","manager","sales"]},{title:"Dokumenty",href:"/documents",icon:$n,roles:["admin","manager","sales"]},{title:"Nastavenia",href:"/settings",icon:nr,roles:["admin","manager","sales"]}];function Sr(){const{collapsed:e,setCollapsed:t}=Vt(),{user:n,logout:r}=W(),o=Jt();if(!n)return null;const s=kr.filter(i=>i.roles.includes(n.role)),l=i=>{switch(i){case"admin":return"Administrátor";case"manager":return"Manažér";case"sales":return"Obchodník"}};return a.jsxs("aside",{className:y("flex flex-col h-screen bg-sidebar border-r border-sidebar-border transition-all duration-300","relative",e?"w-16":"w-64"),children:[a.jsxs("div",{className:"flex items-center justify-between p-4 h-16 flex-shrink-0 border-b border-sidebar-border",children:[!e&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary flex items-center justify-center",children:a.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"AS"})}),a.jsx("span",{className:"font-display text-lg font-bold text-sidebar-foreground",children:"ArtStone"})]}),a.jsx(K,{variant:"ghost",size:"icon-sm",onClick:()=>t(!e),className:"text-sidebar-muted-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent",children:e?a.jsx(pn,{className:"h-4 w-4"}):a.jsx(Tn,{className:"h-4 w-4"})})]}),a.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:s.map(i=>{const d=o.pathname===i.href;return a.jsxs(Zt,{to:i.href,className:y("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 border border-transparent","text-sidebar-muted-foreground hover:text-sidebar-foreground",!d&&"hover:bg-sidebar-accent",d&&"bg-primary/10 text-primary font-semibold border-primary/20",e&&"justify-center px-2"),children:[a.jsx(i.icon,{className:y("h-5 w-5 flex-shrink-0",d&&"text-primary")}),!e&&a.jsx("span",{className:"font-medium",children:i.title})]},i.href)})}),a.jsxs("div",{className:"p-3 border-t border-sidebar-border flex-shrink-0 bg-sidebar-accent/30",children:[a.jsxs("div",{className:y("flex items-center gap-3 p-2 rounded-lg mb-2",e&&"justify-center"),children:[a.jsx(tt,{className:"h-9 w-9 border border-sidebar-border",children:a.jsx(nt,{className:"bg-primary/10 text-primary text-sm font-bold",children:n.avatar||(n.name?n.name.slice(0,2).toUpperCase():"U")})}),!e&&a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-sidebar-foreground truncate",children:n.name||"User"}),a.jsx("p",{className:"text-xs text-sidebar-muted-foreground truncate",children:l(n.role)})]})]}),a.jsxs(K,{variant:"ghost",size:e?"icon-sm":"sm",onClick:r,className:y("w-full text-sidebar-muted-foreground hover:text-destructive hover:bg-destructive/10 border border-transparent hover:border-destructive/20",e&&"w-auto"),children:[a.jsx(Kn,{className:"h-4 w-4"}),!e&&a.jsx("span",{className:"ml-2 font-medium",children:"Odhlásiť sa"})]})]})]})}function jr(e){const t=Nr(e),n=c.forwardRef((r,o)=>{const{children:s,...l}=r,i=c.Children.toArray(s),d=i.find(Pr);if(d){const u=d.props.children,f=i.map(h=>h===d?c.Children.count(u)>1?c.Children.only(null):c.isValidElement(u)?u.props.children:null:h);return a.jsx(t,{...l,ref:o,children:c.isValidElement(u)?c.cloneElement(u,void 0,f):null})}return a.jsx(t,{...l,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function Nr(e){const t=c.forwardRef((n,r)=>{const{children:o,...s}=n;if(c.isValidElement(o)){const l=_r(o),i=Mr(s,o.props);return o.type!==c.Fragment&&(i.ref=r?en(r,l):l),c.cloneElement(o,i)}return c.Children.count(o)>1?c.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Cr=Symbol("radix.slottable");function Pr(e){return c.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Cr}function Mr(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...i)=>{const d=s(...i);return o(...i),d}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function _r(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ae="Dialog",[rt,Qa]=qe(ae),[Dr,C]=rt(ae),ot=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:l=!0}=e,i=c.useRef(null),d=c.useRef(null),[u,f]=tn({prop:r,defaultProp:o??!1,onChange:s,caller:ae});return a.jsx(Dr,{scope:t,triggerRef:i,contentRef:d,contentId:ce(),titleId:ce(),descriptionId:ce(),open:u,onOpenChange:f,onOpenToggle:c.useCallback(()=>f(h=>!h),[f]),modal:l,children:n})};ot.displayName=ae;var at="DialogTrigger",st=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=C(at,n),s=T(t,o.triggerRef);return a.jsx(D.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":ke(o.open),...r,ref:s,onClick:S(e.onClick,o.onOpenToggle)})});st.displayName=at;var ye="DialogPortal",[Rr,it]=rt(ye,{forceMount:void 0}),lt=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,s=C(ye,t);return a.jsx(Rr,{scope:t,forceMount:n,children:c.Children.map(r,l=>a.jsx($,{present:n||s.open,children:a.jsx(nn,{asChild:!0,container:o,children:l})}))})};lt.displayName=ye;var ne="DialogOverlay",ct=c.forwardRef((e,t)=>{const n=it(ne,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=C(ne,e.__scopeDialog);return s.modal?a.jsx($,{present:r||s.open,children:a.jsx(Ar,{...o,ref:t})}):null});ct.displayName=ne;var Er=jr("DialogOverlay.RemoveScroll"),Ar=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=C(ne,n);return a.jsx(bn,{as:Er,allowPinchZoom:!0,shards:[o.contentRef],children:a.jsx(D.div,{"data-state":ke(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),I="DialogContent",dt=c.forwardRef((e,t)=>{const n=it(I,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=C(I,e.__scopeDialog);return a.jsx($,{present:r||s.open,children:s.modal?a.jsx(Tr,{...o,ref:t}):a.jsx(Or,{...o,ref:t})})});dt.displayName=I;var Tr=c.forwardRef((e,t)=>{const n=C(I,e.__scopeDialog),r=c.useRef(null),o=T(t,n.contentRef,r);return c.useEffect(()=>{const s=r.current;if(s)return gn(s)},[]),a.jsx(ut,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:S(e.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:S(e.onPointerDownOutside,s=>{const l=s.detail.originalEvent,i=l.button===0&&l.ctrlKey===!0;(l.button===2||i)&&s.preventDefault()}),onFocusOutside:S(e.onFocusOutside,s=>s.preventDefault())})}),Or=c.forwardRef((e,t)=>{const n=C(I,e.__scopeDialog),r=c.useRef(!1),o=c.useRef(!1);return a.jsx(ut,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=s.target;n.triggerRef.current?.contains(l)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),ut=c.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...l}=e,i=C(I,n),d=c.useRef(null),u=T(t,d);return xn(),a.jsxs(a.Fragment,{children:[a.jsx(vn,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:a.jsx(on,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":ke(i.open),...l,ref:u,onDismiss:()=>i.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(Wr,{titleId:i.titleId}),a.jsx(Ir,{contentRef:d,descriptionId:i.descriptionId})]})]})}),we="DialogTitle",mt=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=C(we,n);return a.jsx(D.h2,{id:o.titleId,...r,ref:t})});mt.displayName=we;var ft="DialogDescription",ht=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=C(ft,n);return a.jsx(D.p,{id:o.descriptionId,...r,ref:t})});ht.displayName=ft;var pt="DialogClose",gt=c.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=C(pt,n);return a.jsx(D.button,{type:"button",...r,ref:t,onClick:S(e.onClick,()=>o.onOpenChange(!1))})});gt.displayName=pt;function ke(e){return e?"open":"closed"}var bt="DialogTitleWarning",[Ga,xt]=rn(bt,{contentName:I,titleName:we,docsSlug:"dialog"}),Wr=({titleId:e})=>{const t=xt(bt),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return c.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Lr="DialogDescriptionWarning",Ir=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xt(Lr).contentName}}.`;return c.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},$r=ot,Fr=st,zr=lt,vt=ct,yt=dt,wt=mt,kt=ht,qr=gt;const Hr=$r,Ja=Fr,Vr=zr,St=c.forwardRef(({className:e,...t},n)=>a.jsx(vt,{ref:n,className:y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));St.displayName=vt.displayName;const jt=c.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(Vr,{children:[a.jsx(St,{}),a.jsxs(yt,{ref:r,className:y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,a.jsxs(qr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(an,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));jt.displayName=yt.displayName;const Kr=({className:e,...t})=>a.jsx("div",{className:y("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Kr.displayName="DialogHeader";const Xr=({className:e,...t})=>a.jsx("div",{className:y("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Xr.displayName="DialogFooter";const Ur=c.forwardRef(({className:e,...t},n)=>a.jsx(wt,{ref:n,className:y("text-lg font-semibold leading-none tracking-tight",e),...t}));Ur.displayName=wt.displayName;const Yr=c.forwardRef(({className:e,...t},n)=>a.jsx(kt,{ref:n,className:y("text-sm text-muted-foreground",e),...t}));Yr.displayName=kt.displayName;function Br(e){const{user:t}=W(),[n,r]=c.useState("");c.useEffect(()=>{const i=setTimeout(()=>{r(e)},300);return()=>clearTimeout(i)},[e]);const{data:o,isLoading:s}=be({queryKey:["global-search",n,t?.id],queryFn:async()=>{if(!n||n.length<2)return{leads:[],clients:[],quotes:[],invoices:[],inventory:[]};const i=`%${n}%`;let d=E.from("leads").select("id, contact_name, email, phone, company_name, status").or(`contact_name.ilike.${i},email.ilike.${i},phone.ilike.${i},company_name.ilike.${i}`).limit(5),u=E.from("clients").select("id, contact_name, email, phone, company_name, status").or(`contact_name.ilike.${i},email.ilike.${i},phone.ilike.${i},company_name.ilike.${i}`).limit(5),f=E.from("quotes").select("id, quote_number, client_id, clients(contact_name), total_price").ilike("quote_number",i).limit(5),h=E.from("invoices").select("id, invoice_number, total, status, clients(contact_name, company_name)").ilike("invoice_number",i).limit(5),m=E.from("inventory_items").select("id, name, sku, sale_price, category:inventory_categories(name)").or(`name.ilike.${i},sku.ilike.${i}`).limit(5);t?.role==="sales"&&t?.regionId&&(d=d.eq("region_id",t.regionId),u=u.eq("region_id",t.regionId));const[p,x,g,v,P]=await Promise.allSettled([d,u,f,h,m]),F=(p.status==="fulfilled"&&p.value.data||[]).map(b=>({id:b.id,type:"lead",title:b.contact_name,subtitle:b.company_name,metadata:{email:b.email,phone:b.phone,status:b.status},href:"/leads"})),U=(x.status==="fulfilled"&&x.value.data||[]).map(b=>({id:b.id,type:"client",title:b.contact_name,subtitle:b.company_name,metadata:{email:b.email,phone:b.phone,status:b.status},href:"/clients"})),z=(g.status==="fulfilled"&&g.value.data||[]).map(b=>({id:b.id,type:"quote",title:`Ponuka ${b.quote_number}`,subtitle:b.clients?.contact_name,metadata:{company:b.total_price?`${b.total_price}€`:void 0},href:"/quotes"})),q=(v.status==="fulfilled"&&v.value.data||[]).map(b=>({id:b.id,type:"invoice",title:`Faktúra ${b.invoice_number}`,subtitle:b.clients?.contact_name||b.clients?.company_name,metadata:{company:b.total?`${b.total}€`:void 0,status:b.status},href:"/invoices"})),L=(P.status==="fulfilled"&&P.value.data||[]).map(b=>({id:b.id,type:"inventory",title:b.name,subtitle:b.sku,metadata:{company:b.sale_price?`${b.sale_price}€`:void 0},href:"/inventory"}));return{leads:F,clients:U,quotes:z,invoices:q,inventory:L}},enabled:n.length>=2}),l=c.useCallback(()=>{r("")},[]);return{results:o||{leads:[],clients:[],quotes:[],invoices:[],inventory:[]},isLoading:s,clearResults:l}}const Qr={lead:sr,client:Dn,quote:te,invoice:Ve,inventory:He},Y={lead:"Leady",client:"Klienti",quote:"Ponuky",invoice:"Faktúry",inventory:"Sklad"};function G(e,t){if(!t)return e;const n=e.split(new RegExp(`(${t})`,"gi"));return a.jsx(a.Fragment,{children:n.map((r,o)=>r.toLowerCase()===t.toLowerCase()?a.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-900 text-foreground",children:r},o):r)})}function Gr({results:e,isLoading:t,query:n,selectedIndex:r,onSelect:o}){if(t)return a.jsx("div",{className:"px-4 py-4 space-y-4",children:[1,2,3].map(i=>a.jsxs("div",{className:"flex gap-3",children:[a.jsx(de,{className:"h-10 w-10 rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(de,{className:"h-4 w-3/4"}),a.jsx(de,{className:"h-3 w-1/2"})]})]},i))});const s=[{key:"leads",label:Y.lead,results:e.leads},{key:"clients",label:Y.client,results:e.clients},{key:"quotes",label:Y.quote,results:e.quotes},{key:"invoices",label:Y.invoice,results:e.invoices},{key:"inventory",label:Y.inventory,results:e.inventory}].filter(i=>i.results.length>0);let l=0;return a.jsx("div",{className:"py-2",children:s.map(i=>{const d=l;return a.jsxs("div",{className:"mb-4 last:mb-0",children:[a.jsxs("div",{className:"px-4 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:[i.label," (",i.results.length,")"]}),a.jsx("div",{children:i.results.map((u,f)=>{const m=d+f===r;l++;const p=Qr[u.type];return a.jsxs("button",{onClick:()=>o(u),className:y("w-full px-4 py-3 flex items-start gap-3 hover:bg-muted/50 transition-colors text-left",m&&"bg-muted"),children:[a.jsx("div",{className:y("h-10 w-10 rounded-lg flex items-center justify-center flex-shrink-0",u.type==="lead"&&"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",u.type==="client"&&"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",u.type==="quote"&&"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",u.type==="invoice"&&"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",u.type==="inventory"&&"bg-cyan-100 text-cyan-700 dark:bg-cyan-900/30 dark:text-cyan-400"),children:a.jsx(p,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm text-foreground",children:G(u.title,n)}),u.subtitle&&a.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:G(u.subtitle,n)}),u.metadata&&a.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-xs text-muted-foreground",children:[u.metadata.email&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Un,{className:"h-3 w-3"}),G(u.metadata.email,n)]}),u.metadata.phone&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Jn,{className:"h-3 w-3"}),G(u.metadata.phone,n)]}),u.metadata.company&&a.jsx("span",{className:"truncate",children:u.metadata.company})]})]})]},u.id)})})]},i.key)})})}function Jr({className:e}){const[t,n]=c.useState(!1),[r,o]=c.useState(""),[s,l]=c.useState(0),i=c.useRef(null),{results:d,isLoading:u}=Br(r),f=[...d.leads,...d.clients,...d.quotes],h=f.length;c.useEffect(()=>{const g=v=>{(v.metaKey||v.ctrlKey)&&v.key==="k"&&(v.preventDefault(),n(!0))};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),c.useEffect(()=>{t&&i.current&&setTimeout(()=>i.current?.focus(),100)},[t]);const m=c.useCallback(()=>{n(!1),o(""),l(0)},[]),p=c.useCallback(g=>{if(g.key==="ArrowDown")g.preventDefault(),l(v=>(v+1)%Math.max(h,1));else if(g.key==="ArrowUp")g.preventDefault(),l(v=>v===0?Math.max(h-1,0):v-1);else if(g.key==="Enter"&&h>0){g.preventDefault();const v=f[s];v&&(window.location.href=v.href,m())}else g.key==="Escape"&&m()},[h,s,f,m]),x=c.useCallback(g=>{window.location.href=g.href,m()},[m]);return a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>n(!0),className:y("flex items-center gap-2 px-3 py-1.5 rounded-lg","bg-muted/50 hover:bg-muted transition-colors","border border-border","text-sm text-muted-foreground","w-full max-w-md",e),children:[a.jsx(Q,{className:"h-4 w-4"}),a.jsx("span",{children:"Hľadať leady, klientov, ponuky..."}),a.jsxs("kbd",{className:"ml-auto hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border bg-background px-1.5 font-mono text-[10px] font-medium text-muted-foreground",children:[a.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),a.jsx(Hr,{open:t,onOpenChange:n,children:a.jsxs(jt,{className:"sm:max-w-[600px] p-0 gap-0",children:[a.jsxs("div",{className:"flex items-center border-b px-4 py-3",children:[u?a.jsx(sn,{className:"h-5 w-5 animate-spin text-muted-foreground mr-3"}):a.jsx(Q,{className:"h-5 w-5 text-muted-foreground mr-3"}),a.jsx("input",{ref:i,type:"text",placeholder:"Hľadať leady, klientov, ponuky...",value:r,onChange:g=>{o(g.target.value),l(0)},onKeyDown:p,className:"flex-1 bg-transparent border-none outline-none text-sm placeholder:text-muted-foreground"}),r&&a.jsx("button",{onClick:()=>o(""),className:"text-xs text-muted-foreground hover:text-foreground",children:"Vymazať"})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:r.length<2?a.jsxs("div",{className:"px-4 py-8 text-center text-sm text-muted-foreground",children:[a.jsx(Q,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),a.jsx("p",{children:"Začnite písať pre vyhľadávanie..."}),a.jsx("p",{className:"text-xs mt-1",children:"Minimálne 2 znaky"})]}):h===0&&!u?a.jsxs("div",{className:"px-4 py-8 text-center text-sm text-muted-foreground",children:[a.jsx(Q,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),a.jsx("p",{children:"Nenašli sa žiadne výsledky"}),a.jsx("p",{className:"text-xs mt-1",children:"Skúste iný výraz"})]}):a.jsx(Gr,{results:d,isLoading:u,query:r,selectedIndex:s,onSelect:x})}),a.jsxs("div",{className:"border-t px-4 py-2 flex items-center justify-between text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-muted border",children:"↑↓"}),"navigácia"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-muted border",children:"Enter"}),"otvoriť"]})]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-muted border",children:"Esc"}),"zavrieť"]})]})]})})]})}const Zr=ln("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-emerald-500/15 text-emerald-600 dark:text-emerald-400",warning:"border-transparent bg-amber-500/15 text-amber-600 dark:text-amber-400",info:"border-transparent bg-blue-500/15 text-blue-600 dark:text-blue-400",new:"border-transparent bg-blue-500/15 text-blue-600 dark:text-blue-400",contacted:"border-transparent bg-purple-500/15 text-purple-600 dark:text-purple-400",offer:"border-transparent bg-amber-500/15 text-amber-600 dark:text-amber-400",won:"border-transparent bg-emerald-500/15 text-emerald-600 dark:text-emerald-400",lost:"border-transparent bg-red-500/15 text-red-600 dark:text-red-400",waiting:"border-transparent bg-cyan-500/15 text-cyan-600 dark:text-cyan-400",completed:"border-transparent bg-teal-500/15 text-teal-600 dark:text-teal-400"}},defaultVariants:{variant:"default"}});function Nt({className:e,variant:t,...n}){return a.jsx("div",{className:y(Zr({variant:t}),e),...n})}function eo(e,t){return c.useReducer((n,r)=>t[n][r]??n,e)}var Se="ScrollArea",[Ct]=qe(Se),[to,j]=Ct(Se),Pt=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...l}=e,[i,d]=c.useState(null),[u,f]=c.useState(null),[h,m]=c.useState(null),[p,x]=c.useState(null),[g,v]=c.useState(null),[P,F]=c.useState(0),[U,z]=c.useState(0),[q,L]=c.useState(!1),[b,B]=c.useState(!1),k=T(t,H=>d(H)),N=yn(o);return a.jsx(to,{scope:n,type:r,dir:N,scrollHideDelay:s,scrollArea:i,viewport:u,onViewportChange:f,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:q,onScrollbarXEnabledChange:L,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:b,onScrollbarYEnabledChange:B,onCornerWidthChange:F,onCornerHeightChange:z,children:a.jsx(D.div,{dir:N,...l,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":U+"px",...e.style}})})});Pt.displayName=Se;var Mt="ScrollAreaViewport",_t=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=e,l=j(Mt,n),i=c.useRef(null),d=T(t,i,l.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),a.jsx(D.div,{"data-radix-scroll-area-viewport":"",...s,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});_t.displayName=Mt;var R="ScrollAreaScrollbar",je=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=j(R,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:l}=o,i=e.orientation==="horizontal";return c.useEffect(()=>(i?s(!0):l(!0),()=>{i?s(!1):l(!1)}),[i,s,l]),o.type==="hover"?a.jsx(no,{...r,ref:t,forceMount:n}):o.type==="scroll"?a.jsx(ro,{...r,ref:t,forceMount:n}):o.type==="auto"?a.jsx(Dt,{...r,ref:t,forceMount:n}):o.type==="always"?a.jsx(Ne,{...r,ref:t}):null});je.displayName=R;var no=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=j(R,e.__scopeScrollArea),[s,l]=c.useState(!1);return c.useEffect(()=>{const i=o.scrollArea;let d=0;if(i){const u=()=>{window.clearTimeout(d),l(!0)},f=()=>{d=window.setTimeout(()=>l(!1),o.scrollHideDelay)};return i.addEventListener("pointerenter",u),i.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),i.removeEventListener("pointerenter",u),i.removeEventListener("pointerleave",f)}}},[o.scrollArea,o.scrollHideDelay]),a.jsx($,{present:n||s,children:a.jsx(Dt,{"data-state":s?"visible":"hidden",...r,ref:t})})}),ro=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=j(R,e.__scopeScrollArea),s=e.orientation==="horizontal",l=ie(()=>d("SCROLL_END"),100),[i,d]=eo("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return c.useEffect(()=>{if(i==="idle"){const u=window.setTimeout(()=>d("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(u)}},[i,o.scrollHideDelay,d]),c.useEffect(()=>{const u=o.viewport,f=s?"scrollLeft":"scrollTop";if(u){let h=u[f];const m=()=>{const p=u[f];h!==p&&(d("SCROLL"),l()),h=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[o.viewport,s,d,l]),a.jsx($,{present:n||i!=="hidden",children:a.jsx(Ne,{"data-state":i==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:S(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:S(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),Dt=c.forwardRef((e,t)=>{const n=j(R,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,l]=c.useState(!1),i=e.orientation==="horizontal",d=ie(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;l(i?u:f)}},10);return X(n.viewport,d),X(n.content,d),a.jsx($,{present:r||s,children:a.jsx(Ne,{"data-state":s?"visible":"hidden",...o,ref:t})})}),Ne=c.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=j(R,e.__scopeScrollArea),s=c.useRef(null),l=c.useRef(0),[i,d]=c.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Ot(i.viewport,i.content),f={...r,sizes:i,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:m=>s.current=m,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:m=>l.current=m};function h(m,p){return co(m,l.current,i,p)}return n==="horizontal"?a.jsx(oo,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const m=o.viewport.scrollLeft,p=Te(m,i,o.dir);s.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollLeft=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollLeft=h(m,o.dir))}}):n==="vertical"?a.jsx(ao,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const m=o.viewport.scrollTop,p=Te(m,i);s.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollTop=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollTop=h(m))}}):null}),oo=c.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=j(R,e.__scopeScrollArea),[l,i]=c.useState(),d=c.useRef(null),u=T(t,d,s.onScrollbarXChange);return c.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),a.jsx(Et,{"data-orientation":"horizontal",...o,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":se(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(s.viewport){const m=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),Lt(m,h)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&l&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:oe(l.paddingLeft),paddingEnd:oe(l.paddingRight)}})}})}),ao=c.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=j(R,e.__scopeScrollArea),[l,i]=c.useState(),d=c.useRef(null),u=T(t,d,s.onScrollbarYChange);return c.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),a.jsx(Et,{"data-orientation":"vertical",...o,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":se(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(s.viewport){const m=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),Lt(m,h)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&l&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:oe(l.paddingTop),paddingEnd:oe(l.paddingBottom)}})}})}),[so,Rt]=Ct(R),Et=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:l,onThumbPointerDown:i,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:f,onResize:h,...m}=e,p=j(R,n),[x,g]=c.useState(null),v=T(t,k=>g(k)),P=c.useRef(null),F=c.useRef(""),U=p.viewport,z=r.content-r.viewport,q=O(f),L=O(d),b=ie(h,10);function B(k){if(P.current){const N=k.clientX-P.current.left,H=k.clientY-P.current.top;u({x:N,y:H})}}return c.useEffect(()=>{const k=N=>{const H=N.target;x?.contains(H)&&q(N,z)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[U,x,z,q]),c.useEffect(L,[r,L]),X(x,b),X(p.content,b),a.jsx(so,{scope:n,scrollbar:x,hasThumb:o,onThumbChange:O(s),onThumbPointerUp:O(l),onThumbPositionChange:L,onThumbPointerDown:O(i),children:a.jsx(D.div,{...m,ref:v,style:{position:"absolute",...m.style},onPointerDown:S(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),P.current=x.getBoundingClientRect(),F.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),B(k))}),onPointerMove:S(e.onPointerMove,B),onPointerUp:S(e.onPointerUp,k=>{const N=k.target;N.hasPointerCapture(k.pointerId)&&N.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=F.current,p.viewport&&(p.viewport.style.scrollBehavior=""),P.current=null})})})}),re="ScrollAreaThumb",At=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Rt(re,e.__scopeScrollArea);return a.jsx($,{present:n||o.hasThumb,children:a.jsx(io,{ref:t,...r})})}),io=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=j(re,n),l=Rt(re,n),{onThumbPositionChange:i}=l,d=T(t,h=>l.onThumbChange(h)),u=c.useRef(void 0),f=ie(()=>{u.current&&(u.current(),u.current=void 0)},100);return c.useEffect(()=>{const h=s.viewport;if(h){const m=()=>{if(f(),!u.current){const p=uo(h,i);u.current=p,i()}};return i(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[s.viewport,f,i]),a.jsx(D.div,{"data-state":l.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:S(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),x=h.clientX-p.left,g=h.clientY-p.top;l.onThumbPointerDown({x,y:g})}),onPointerUp:S(e.onPointerUp,l.onThumbPointerUp)})});At.displayName=re;var Ce="ScrollAreaCorner",Tt=c.forwardRef((e,t)=>{const n=j(Ce,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(lo,{...e,ref:t}):null});Tt.displayName=Ce;var lo=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=j(Ce,n),[s,l]=c.useState(0),[i,d]=c.useState(0),u=!!(s&&i);return X(o.scrollbarX,()=>{const f=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(f),d(f)}),X(o.scrollbarY,()=>{const f=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(f),l(f)}),u?a.jsx(D.div,{...r,ref:t,style:{width:s,height:i,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function oe(e){return e?parseInt(e,10):0}function Ot(e,t){const n=e/t;return isNaN(n)?0:n}function se(e){const t=Ot(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function co(e,t,n,r="ltr"){const o=se(n),s=o/2,l=t||s,i=o-l,d=n.scrollbar.paddingStart+l,u=n.scrollbar.size-n.scrollbar.paddingEnd-i,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return Wt([d,u],h)(e)}function Te(e,t,n="ltr"){const r=se(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,l=t.content-t.viewport,i=s-r,d=n==="ltr"?[0,l]:[l*-1,0],u=wn(e,d);return Wt([0,l],[0,i])(u)}function Wt(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Lt(e,t){return e>0&&e<t}var uo=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function o(){const s={left:e.scrollLeft,top:e.scrollTop},l=n.left!==s.left,i=n.top!==s.top;(l||i)&&t(),n=s,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)};function ie(e,t){const n=O(e),r=c.useRef(0);return c.useEffect(()=>()=>window.clearTimeout(r.current),[]),c.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function X(e,t){const n=O(t);ee(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var It=Pt,mo=_t,fo=Tt;const $t=c.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(It,{ref:r,className:y("relative overflow-hidden",e),...n,children:[a.jsx(mo,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(Ft,{}),a.jsx(fo,{})]}));$t.displayName=It.displayName;const Ft=c.forwardRef(({className:e,orientation:t="vertical",...n},r)=>a.jsx(je,{ref:r,orientation:t,className:y("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:a.jsx(At,{className:"relative flex-1 rounded-full bg-border"})}));Ft.displayName=je.displayName;function ho(){const{user:e}=W();return be({queryKey:["notifications",e?.id],queryFn:async()=>{const{data:t,error:n}=await E.from("notifications").select("*").eq("user_id",e?.id).order("created_at",{ascending:!1}).limit(20);if(n)throw n;return t},enabled:!!e,refetchInterval:3e4})}function po(){const{user:e}=W();return be({queryKey:["notifications-unread-count",e?.id],queryFn:async()=>{const{count:t,error:n}=await E.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",e?.id).eq("is_read",!1);if(n)throw n;return t||0},enabled:!!e,refetchInterval:3e4})}function go(){const e=ge(),{user:t}=W();return Ke({mutationFn:async n=>{const{error:r}=await E.from("notifications").update({is_read:!0}).eq("id",n).eq("user_id",t?.id);if(r)throw r},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]}),e.invalidateQueries({queryKey:["notifications-unread-count"]})}})}function bo(){const e=ge(),{user:t}=W();return Ke({mutationFn:async()=>{const{error:n}=await E.from("notifications").update({is_read:!0}).eq("user_id",t?.id).eq("is_read",!1);if(n)throw n},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]}),e.invalidateQueries({queryKey:["notifications-unread-count"]})}})}const Za=6048e5,es=864e5,J=43200,Oe=1440,We=Symbol.for("constructDateFrom");function Pe(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&We in e?e[We](t):e instanceof Date?new e.constructor(t):new Date(t)}function A(e,t){return Pe(t||e,e)}let xo={};function zt(){return xo}function Le(e,t){const n=zt(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=A(e,t?.in),s=o.getDay(),l=(s<r?7:0)+s-r;return o.setDate(o.getDate()-l),o.setHours(0,0,0,0),o}function Ie(e){const t=A(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function le(e,...t){const n=Pe.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function Z(e,t){const n=+A(e)-+A(t);return n<0?-1:n>0?1:n}function vo(e){return Pe(e,Date.now())}function yo(e,t,n){const[r,o]=le(n?.in,e,t),s=r.getFullYear()-o.getFullYear(),l=r.getMonth()-o.getMonth();return s*12+l}function wo(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function ko(e,t){return+A(e)-+A(t)}function So(e,t){const n=A(e,t?.in);return n.setHours(23,59,59,999),n}function jo(e,t){const n=A(e,t?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function No(e,t){const n=A(e,t?.in);return+So(n,t)==+jo(n,t)}function Co(e,t,n){const[r,o,s]=le(n?.in,e,e,t),l=Z(o,s),i=Math.abs(yo(o,s));if(i<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-l*i);let d=Z(o,s)===-l;No(r)&&i===1&&Z(r,s)===1&&(d=!1);const u=l*(i-+d);return u===0?0:u}function Po(e,t,n){const r=ko(e,t)/1e3;return wo(n?.roundingMethod)(r)}const Mo={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_o=(e,t,n)=>{let r;const o=Mo[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function V(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Do={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ro={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Eo={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ao={date:V({formats:Do,defaultWidth:"full"}),time:V({formats:Ro,defaultWidth:"full"}),dateTime:V({formats:Eo,defaultWidth:"full"})},To={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Oo=(e,t,n,r)=>To[e];function M(e){return(t,n)=>{const r=n?.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):l;o=e.formattingValues[i]||e.formattingValues[l]}else{const l=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;o=e.values[i]||e.values[l]}const s=e.argumentCallback?e.argumentCallback(t):t;return o[s]}}const Wo={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Lo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Io={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$o={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Fo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qo=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Ho={ordinalNumber:qo,era:M({values:Wo,defaultWidth:"wide"}),quarter:M({values:Lo,defaultWidth:"wide",argumentCallback:e=>e-1}),month:M({values:Io,defaultWidth:"wide"}),day:M({values:$o,defaultWidth:"wide"}),dayPeriod:M({values:Fo,defaultWidth:"wide",formattingValues:zo,defaultFormattingWidth:"wide"})};function _(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(o);if(!s)return null;const l=s[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(i)?Ko(i,h=>h.test(l)):Vo(i,h=>h.test(l));let u;u=e.valueCallback?e.valueCallback(d):d,u=n.valueCallback?n.valueCallback(u):u;const f=t.slice(l.length);return{value:u,rest:f}}}function Vo(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Ko(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function qt(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],s=t.match(e.parsePattern);if(!s)return null;let l=e.valueCallback?e.valueCallback(s[0]):s[0];l=n.valueCallback?n.valueCallback(l):l;const i=t.slice(o.length);return{value:l,rest:i}}}const Xo=/^(\d+)(th|st|nd|rd)?/i,Uo=/\d+/i,Yo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Bo={any:[/^b/i,/^(a|c)/i]},Qo={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Go={any:[/1/i,/2/i,/3/i,/4/i]},Jo={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ea={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ta={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},na={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ra={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oa={ordinalNumber:qt({matchPattern:Xo,parsePattern:Uo,valueCallback:e=>parseInt(e,10)}),era:_({matchPatterns:Yo,defaultMatchWidth:"wide",parsePatterns:Bo,defaultParseWidth:"any"}),quarter:_({matchPatterns:Qo,defaultMatchWidth:"wide",parsePatterns:Go,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_({matchPatterns:Jo,defaultMatchWidth:"wide",parsePatterns:Zo,defaultParseWidth:"any"}),day:_({matchPatterns:ea,defaultMatchWidth:"wide",parsePatterns:ta,defaultParseWidth:"any"}),dayPeriod:_({matchPatterns:na,defaultMatchWidth:"any",parsePatterns:ra,defaultParseWidth:"any"})},aa={code:"en-US",formatDistance:_o,formatLong:Ao,formatRelative:Oo,localize:Ho,match:oa,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sa(e,t,n){const r=zt(),o=n?.locale??r.locale??aa,s=2520,l=Z(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const i=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:l}),[d,u]=le(n?.in,...l>0?[t,e]:[e,t]),f=Po(u,d),h=(Ie(u)-Ie(d))/1e3,m=Math.round((f-h)/60);let p;if(m<2)return n?.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,i):f<10?o.formatDistance("lessThanXSeconds",10,i):f<20?o.formatDistance("lessThanXSeconds",20,i):f<40?o.formatDistance("halfAMinute",0,i):f<60?o.formatDistance("lessThanXMinutes",1,i):o.formatDistance("xMinutes",1,i):m===0?o.formatDistance("lessThanXMinutes",1,i):o.formatDistance("xMinutes",m,i);if(m<45)return o.formatDistance("xMinutes",m,i);if(m<90)return o.formatDistance("aboutXHours",1,i);if(m<Oe){const x=Math.round(m/60);return o.formatDistance("aboutXHours",x,i)}else{if(m<s)return o.formatDistance("xDays",1,i);if(m<J){const x=Math.round(m/Oe);return o.formatDistance("xDays",x,i)}else if(m<J*2)return p=Math.round(m/J),o.formatDistance("aboutXMonths",p,i)}if(p=Co(u,d),p<12){const x=Math.round(m/J);return o.formatDistance("xMonths",x,i)}else{const x=p%12,g=Math.trunc(p/12);return x<3?o.formatDistance("aboutXYears",g,i):x<9?o.formatDistance("overXYears",g,i):o.formatDistance("almostXYears",g+1,i)}}function ia(e,t){return sa(e,vo(e),t)}function $e(e,t,n){const[r,o]=le(n?.in,e,t);return+Le(r,n)==+Le(o,n)}function la(e,t){return t===1&&e.one?e.one:t>=2&&t<=4&&e.twoFour?e.twoFour:e.other}function fe(e,t,n){return la(e,t)[n].replace("{{count}}",String(t))}function ca(e){return["lessThan","about","over","almost"].filter(function(n){return!!e.match(new RegExp("^"+n))})[0]}function he(e){let t="";return e==="almost"&&(t="takmer"),e==="about"&&(t="približne"),t.length>0?t+" ":""}function pe(e){let t="";return e==="lessThan"&&(t="menej než"),e==="over"&&(t="viac než"),t.length>0?t+" ":""}function da(e){return e.charAt(0).toLowerCase()+e.slice(1)}const ua={xSeconds:{one:{present:"sekunda",past:"sekundou",future:"sekundu"},twoFour:{present:"{{count}} sekundy",past:"{{count}} sekundami",future:"{{count}} sekundy"},other:{present:"{{count}} sekúnd",past:"{{count}} sekundami",future:"{{count}} sekúnd"}},halfAMinute:{other:{present:"pol minúty",past:"pol minútou",future:"pol minúty"}},xMinutes:{one:{present:"minúta",past:"minútou",future:"minútu"},twoFour:{present:"{{count}} minúty",past:"{{count}} minútami",future:"{{count}} minúty"},other:{present:"{{count}} minút",past:"{{count}} minútami",future:"{{count}} minút"}},xHours:{one:{present:"hodina",past:"hodinou",future:"hodinu"},twoFour:{present:"{{count}} hodiny",past:"{{count}} hodinami",future:"{{count}} hodiny"},other:{present:"{{count}} hodín",past:"{{count}} hodinami",future:"{{count}} hodín"}},xDays:{one:{present:"deň",past:"dňom",future:"deň"},twoFour:{present:"{{count}} dni",past:"{{count}} dňami",future:"{{count}} dni"},other:{present:"{{count}} dní",past:"{{count}} dňami",future:"{{count}} dní"}},xWeeks:{one:{present:"týždeň",past:"týždňom",future:"týždeň"},twoFour:{present:"{{count}} týždne",past:"{{count}} týždňami",future:"{{count}} týždne"},other:{present:"{{count}} týždňov",past:"{{count}} týždňami",future:"{{count}} týždňov"}},xMonths:{one:{present:"mesiac",past:"mesiacom",future:"mesiac"},twoFour:{present:"{{count}} mesiace",past:"{{count}} mesiacmi",future:"{{count}} mesiace"},other:{present:"{{count}} mesiacov",past:"{{count}} mesiacmi",future:"{{count}} mesiacov"}},xYears:{one:{present:"rok",past:"rokom",future:"rok"},twoFour:{present:"{{count}} roky",past:"{{count}} rokmi",future:"{{count}} roky"},other:{present:"{{count}} rokov",past:"{{count}} rokmi",future:"{{count}} rokov"}}},ma=(e,t,n)=>{const r=ca(e)||"",o=da(e.substring(r.length)),s=ua[o];return n?.addSuffix?n.comparison&&n.comparison>0?he(r)+"o "+pe(r)+fe(s,t,"future"):he(r)+"pred "+pe(r)+fe(s,t,"past"):he(r)+pe(r)+fe(s,t,"present")},fa={full:"EEEE d. MMMM y",long:"d. MMMM y",medium:"d. M. y",short:"d. M. y"},ha={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},pa={full:"{{date}}, {{time}}",long:"{{date}}, {{time}}",medium:"{{date}}, {{time}}",short:"{{date}} {{time}}"},ga={date:V({formats:fa,defaultWidth:"full"}),time:V({formats:ha,defaultWidth:"full"}),dateTime:V({formats:pa,defaultWidth:"full"})},Me=["nedeľu","pondelok","utorok","stredu","štvrtok","piatok","sobotu"];function ba(e){const t=Me[e];switch(e){case 0:case 3:case 6:return"'minulú "+t+" o' p";default:return"'minulý' eeee 'o' p"}}function Fe(e){const t=Me[e];return e===4?"'vo' eeee 'o' p":"'v "+t+" o' p"}function xa(e){const t=Me[e];switch(e){case 0:case 4:case 6:return"'budúcu "+t+" o' p";default:return"'budúci' eeee 'o' p"}}const va={lastWeek:(e,t,n)=>{const r=e.getDay();return $e(e,t,n)?Fe(r):ba(r)},yesterday:"'včera o' p",today:"'dnes o' p",tomorrow:"'zajtra o' p",nextWeek:(e,t,n)=>{const r=e.getDay();return $e(e,t,n)?Fe(r):xa(r)},other:"P"},ya=(e,t,n,r)=>{const o=va[e];return typeof o=="function"?o(t,n,r):o},wa={narrow:["pred Kr.","po Kr."],abbreviated:["pred Kr.","po Kr."],wide:["pred Kristom","po Kristovi"]},ka={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. štvrťrok","2. štvrťrok","3. štvrťrok","4. štvrťrok"]},Sa={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","feb","mar","apr","máj","jún","júl","aug","sep","okt","nov","dec"],wide:["január","február","marec","apríl","máj","jún","júl","august","september","október","november","december"]},ja={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","feb","mar","apr","máj","jún","júl","aug","sep","okt","nov","dec"],wide:["januára","februára","marca","apríla","mája","júna","júla","augusta","septembra","októbra","novembra","decembra"]},Na={narrow:["n","p","u","s","š","p","s"],short:["ne","po","ut","st","št","pi","so"],abbreviated:["ne","po","ut","st","št","pi","so"],wide:["nedeľa","pondelok","utorok","streda","štvrtok","piatok","sobota"]},Ca={narrow:{am:"AM",pm:"PM",midnight:"poln.",noon:"pol.",morning:"ráno",afternoon:"pop.",evening:"več.",night:"noc"},abbreviated:{am:"AM",pm:"PM",midnight:"poln.",noon:"pol.",morning:"ráno",afternoon:"popol.",evening:"večer",night:"noc"},wide:{am:"AM",pm:"PM",midnight:"polnoc",noon:"poludnie",morning:"ráno",afternoon:"popoludnie",evening:"večer",night:"noc"}},Pa={narrow:{am:"AM",pm:"PM",midnight:"o poln.",noon:"nap.",morning:"ráno",afternoon:"pop.",evening:"več.",night:"v n."},abbreviated:{am:"AM",pm:"PM",midnight:"o poln.",noon:"napol.",morning:"ráno",afternoon:"popol.",evening:"večer",night:"v noci"},wide:{am:"AM",pm:"PM",midnight:"o polnoci",noon:"napoludnie",morning:"ráno",afternoon:"popoludní",evening:"večer",night:"v noci"}},Ma=(e,t)=>Number(e)+".",_a={ordinalNumber:Ma,era:M({values:wa,defaultWidth:"wide"}),quarter:M({values:ka,defaultWidth:"wide",argumentCallback:e=>e-1}),month:M({values:Sa,defaultWidth:"wide",formattingValues:ja,defaultFormattingWidth:"wide"}),day:M({values:Na,defaultWidth:"wide"}),dayPeriod:M({values:Ca,defaultWidth:"wide",formattingValues:Pa,defaultFormattingWidth:"wide"})},Da=/^(\d+)\.?/i,Ra=/\d+/i,Ea={narrow:/^(pred Kr\.|pred n\. l\.|po Kr\.|n\. l\.)/i,abbreviated:/^(pred Kr\.|pred n\. l\.|po Kr\.|n\. l\.)/i,wide:/^(pred Kristom|pred na[šs][íi]m letopo[čc]tom|po Kristovi|n[áa][šs]ho letopo[čc]tu)/i},Aa={any:[/^pr/i,/^(po|n)/i]},Ta={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]\. [šs]tvr[ťt]rok/i},Oa={any:[/1/i,/2/i,/3/i,/4/i]},Wa={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|m[áa]j|j[úu]n|j[úu]l|aug|sep|okt|nov|dec)/i,wide:/^(janu[áa]ra?|febru[áa]ra?|(marec|marca)|apr[íi]la?|m[áa]ja?|j[úu]na?|j[úu]la?|augusta?|(september|septembra)|(okt[óo]ber|okt[óo]bra)|(november|novembra)|(december|decembra))/i},La={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^m[áa]j/i,/^j[úu]n/i,/^j[úu]l/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ia={narrow:/^[npusšp]/i,short:/^(ne|po|ut|st|št|pi|so)/i,abbreviated:/^(ne|po|ut|st|št|pi|so)/i,wide:/^(nede[ľl]a|pondelok|utorok|streda|[šs]tvrtok|piatok|sobota])/i},$a={narrow:[/^n/i,/^p/i,/^u/i,/^s/i,/^š/i,/^p/i,/^s/i],any:[/^n/i,/^po/i,/^u/i,/^st/i,/^(št|stv)/i,/^pi/i,/^so/i]},Fa={narrow:/^(am|pm|(o )?poln\.?|(nap\.?|pol\.?)|r[áa]no|pop\.?|ve[čc]\.?|(v n\.?|noc))/i,abbreviated:/^(am|pm|(o )?poln\.?|(napol\.?|pol\.?)|r[áa]no|pop\.?|ve[čc]er|(v )?noci?)/i,any:/^(am|pm|(o )?polnoci?|(na)?poludnie|r[áa]no|popoludn(ie|í|i)|ve[čc]er|(v )?noci?)/i},za={any:{am:/^am/i,pm:/^pm/i,midnight:/poln/i,noon:/^(nap|(na)?pol(\.|u))/i,morning:/^r[áa]no/i,afternoon:/^pop/i,evening:/^ve[čc]/i,night:/^(noc|v n\.)/i}},qa={ordinalNumber:qt({matchPattern:Da,parsePattern:Ra,valueCallback:e=>parseInt(e,10)}),era:_({matchPatterns:Ea,defaultMatchWidth:"wide",parsePatterns:Aa,defaultParseWidth:"any"}),quarter:_({matchPatterns:Ta,defaultMatchWidth:"wide",parsePatterns:Oa,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_({matchPatterns:Wa,defaultMatchWidth:"wide",parsePatterns:La,defaultParseWidth:"any"}),day:_({matchPatterns:Ia,defaultMatchWidth:"wide",parsePatterns:$a,defaultParseWidth:"any"}),dayPeriod:_({matchPatterns:Fa,defaultMatchWidth:"any",parsePatterns:za,defaultParseWidth:"any"})},Ha={code:"sk",formatDistance:ma,formatLong:ga,formatRelative:ya,localize:_a,match:qa,options:{weekStartsOn:1,firstWeekContainsDate:4}};function Va({notification:e,onClose:t}){const n=cn(),r=go(),o=()=>{switch(e.type){case"new_client":return a.jsx(Sn,{className:"h-4 w-4 text-blue-500"});case"new_lead":return a.jsx(te,{className:"h-4 w-4 text-green-500"});default:return a.jsx(te,{className:"h-4 w-4"})}},s=()=>{if(e.is_read||r.mutate(e.id),e.entity_type&&e.entity_id){const i=e.entity_type==="client"?"/clients":"/leads";n(i),t?.()}},l=ia(new Date(e.created_at),{addSuffix:!0,locale:Ha});return a.jsxs("div",{onClick:s,className:y("flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-colors","hover:bg-accent",!e.is_read&&"bg-primary/5"),children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:y("text-sm font-medium",!e.is_read&&"text-foreground font-semibold"),children:e.title}),!e.is_read&&a.jsx("div",{className:"h-2 w-2 rounded-full bg-primary flex-shrink-0"})]}),e.message&&a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5 line-clamp-2",children:e.message}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l})]}),e.is_read&&a.jsx(kn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 mt-0.5"})]})}function Ka(){const[e,t]=c.useState(!1),{data:n=[],isLoading:r}=ho(),{data:o=0}=po(),s=bo(),l=()=>{s.mutate()};return a.jsxs(jn,{open:e,onOpenChange:t,children:[a.jsx(Nn,{asChild:!0,children:a.jsxs(K,{variant:"ghost",size:"icon-sm",className:"relative",children:[a.jsx(De,{className:"h-4 w-4"}),o>0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 rounded-full bg-primary"}),a.jsx(Nt,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:o>9?"9+":o})]})]})}),a.jsxs(Cn,{align:"end",className:"w-80 p-0",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Notifikácie"}),o>0&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[o," ",o===1?"nová":"nové"]})]}),o>0&&a.jsxs(K,{variant:"ghost",size:"sm",onClick:l,disabled:s.isPending,className:"h-8 text-xs",children:[a.jsx(En,{className:"h-3 w-3 mr-1"}),"Označiť všetko"]})]}),a.jsx($t,{className:"h-[400px]",children:r?a.jsx("div",{className:"p-8 text-center text-sm text-muted-foreground",children:"Načítavam..."}):n.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(De,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),a.jsx("p",{className:"text-sm font-medium",children:"Žiadne notifikácie"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Zatiaľ nemáte žiadne nové správy"})]}):a.jsx("div",{className:"p-2 space-y-1",children:n.map(i=>a.jsx(Va,{notification:i,onClose:()=>t(!1)},i.id))})})]})]})}function Xa({title:e}){const{user:t}=W(),{mobileOpen:n,setMobileOpen:r}=Vt();return a.jsx("header",{className:"sticky top-0 z-40 h-16 border-b-2 border-border bg-card/95 backdrop-blur shadow-vintage",children:a.jsxs("div",{className:"flex h-full items-center justify-between px-4 md:px-6",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx(K,{variant:"ghost",size:"icon",onClick:()=>r(!n),className:"lg:hidden",children:a.jsx(Bn,{className:"h-5 w-5"})}),e&&a.jsx("h1",{className:"font-display text-lg md:text-xl font-bold text-foreground",children:e}),t&&a.jsx(Nt,{variant:"secondary",className:"font-medium bg-primary/15 text-foreground border border-border hover:bg-primary/25",children:t.regionName})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"hidden md:block",children:a.jsx(Jr,{className:"w-80"})}),a.jsx(Ka,{}),a.jsx(dn,{children:a.jsxs(un,{children:[a.jsx(mn,{asChild:!0,children:a.jsx(K,{variant:"ghost",size:"icon-sm",className:"text-muted-foreground hover:text-foreground hover:bg-accent",children:a.jsx(Wn,{className:"h-4 w-4"})})}),a.jsx(fn,{children:a.jsx("p",{children:"Nová funkcia bude dostupná čoskoro"})})]})}),a.jsx(Pn,{})]})]})})}const Ht=c.createContext({collapsed:!1,setCollapsed:()=>{},mobileOpen:!1,setMobileOpen:()=>{}}),Vt=()=>c.useContext(Ht);function ts({children:e,title:t}){const{isAuthenticated:n}=W(),[r,o]=c.useState(!1),[s,l]=c.useState(!1);return c.useEffect(()=>{const i=()=>{window.innerWidth>=1024&&l(!1)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),n?a.jsx(Ht.Provider,{value:{collapsed:r,setCollapsed:o,mobileOpen:s,setMobileOpen:l},children:a.jsxs("div",{className:"flex min-h-screen w-full overflow-hidden vintage-paper-bg",children:[s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>l(!1)}),a.jsx("div",{className:`fixed left-0 top-0 h-screen z-40 transition-transform duration-300 lg:translate-x-0 ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:a.jsx(Sr,{})}),a.jsxs("div",{className:`flex-1 flex flex-col min-h-screen transition-all duration-300 ${r?"lg:ml-16":"lg:ml-64"} ml-0`,children:[a.jsx(Xa,{title:t}),a.jsx("main",{className:"flex-1 p-4 md:p-6 overflow-auto",children:e})]})]})}):a.jsx(hn,{to:"/login",replace:!0})}export{tt as A,Nt as B,De as C,Hr as D,Qa as E,te as F,$r as G,zr as H,zn as I,yt as J,wt as K,kt as L,Un as M,qr as N,vt as O,Jn as P,Ve as R,Q as S,Fr as T,lr as U,Ga as W,nt as a,ts as b,Pe as c,Ja as d,jt as e,Kr as f,Ur as g,Yr as h,Xr as i,sr as j,Dn as k,Le as l,Ie as m,le as n,es as o,Za as p,zt as q,aa as r,Ha as s,A as t,Ke as u,He as v,nr as w,$t as x,$n as y,or as z};
