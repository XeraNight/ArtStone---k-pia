import{c as Pt,R as B,r as h,j as r,B as ie,t as ge,S as Tn,l as _n,a as kr,m as Rt,g as tn,u as ps,C as ys,b as bs}from"./index-ixxTEzIM.js";import{D as zt,d as Gn,e as Ut,f as Bt,g as $t,h as fn,i as hn,B as gt,M as vt,P as xt,j as ws,F as js,k as Ns,s as Ss,b as Zn,S as Cs}from"./AppLayout-BqQJj8es.js";import{L as fe,I as Qe,S as He,a as Xe,b as Ye,c as qe,d as X}from"./select-COUMOr2z.js";import{T as _r}from"./textarea-6nmU1y0a.js";import{u as Ds,a as ks,b as _s,c as Es,d as Er,e as Ar,f as As}from"./useLeads-CvIjWzOH.js";import{u as On}from"./useRegions-C9nCSrl3.js";import{P as nn,E as Rs}from"./plus-_0AWnC6U.js";import{a as Ls,C as Mn,S as Vs}from"./useActivities-BgmWqxSA.js";import{M as Rr}from"./map-pin-D6BAvuAg.js";import{T as Fs,H as Ts,Q as Os}from"./QuickActivityDialog-BIzm7T0k.js";import{u as Lr,a as Ms}from"./useSalespeople-CDV7TdtJ.js";import{A as Jn,f as Is}from"./format-CWEgZVmF.js";import{T as Ps,a as zs,b as jn,c as Ze,d as Us,e as Ke}from"./table-8lq7_8Yr.js";import{D as Bs,a as $s,b as Ks,c as ct,d as Ws,e as Hs,f as Xs,g as Ys,h as qs,i as Gs,U as Zs}from"./ThemeToggle-mam2t0E5.js";import{D as Qn}from"./download-BrmPZlTB.js";import{P as Js}from"./pencil-CtBFCAGF.js";import"./demoData-tljgfLqM.js";const Qs=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],er=Pt("facebook",Qs);const ea=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],En=Pt("globe",ea);const ta=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],na=Pt("grip-vertical",ta);const ra=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],sa=Pt("layout-grid",ra);const aa=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],ia=Pt("table",aa);var Kt=e=>e.type==="checkbox",dt=e=>e instanceof Date,we=e=>e==null;const Vr=e=>typeof e=="object";var se=e=>!we(e)&&!Array.isArray(e)&&Vr(e)&&!dt(e),oa=e=>se(e)&&e.target?Kt(e.target)?e.target.checked:e.target.value:e,la=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ca=(e,t)=>e.has(la(t)),da=e=>{const t=e.constructor&&e.constructor.prototype;return se(t)&&t.hasOwnProperty("isPrototypeOf")},In=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function le(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(In&&(e instanceof Blob||s))&&(n||se(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!da(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=le(e[i]));else return e;return t}var mn=e=>/^\w*$/.test(e),ee=e=>e===void 0,Pn=e=>Array.isArray(e)?e.filter(Boolean):[],zn=e=>Pn(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_=(e,t,n)=>{if(!t||!se(e))return n;const s=(mn(t)?[t]:zn(t)).reduce((i,a)=>we(i)?i:i[a],e);return ee(s)||s===e?ee(e[t])?n:e[t]:s},We=e=>typeof e=="boolean",J=(e,t,n)=>{let s=-1;const i=mn(t)?[t]:zn(t),a=i.length,o=a-1;for(;++s<a;){const l=i[s];let u=n;if(s!==o){const m=e[l];u=se(m)||Array.isArray(m)?m:isNaN(+i[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=u,e=e[l]}};const tr={BLUR:"blur",FOCUS_OUT:"focusout"},Me={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Je={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ua=B.createContext(null);ua.displayName="HookFormContext";var fa=(e,t,n,s=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Me.all&&(t._proxyFormState[o]=!s||Me.all),e[o]}});return i};const ha=typeof window<"u"?B.useLayoutEffect:B.useEffect;var _e=e=>typeof e=="string",ma=(e,t,n,s,i)=>_e(e)?(s&&t.watch.add(e),_(n,e,i)):Array.isArray(e)?e.map(a=>(s&&t.watch.add(a),_(n,a))):(s&&(t.watchAll=!0),n),An=e=>we(e)||!Vr(e);function at(e,t,n=new WeakSet){if(An(e)||An(t))return Object.is(e,t);if(dt(e)&&dt(t))return e.getTime()===t.getTime();const s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const a of s){const o=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const l=t[a];if(dt(o)&&dt(l)||se(o)&&se(l)||Array.isArray(o)&&Array.isArray(l)?!at(o,l,n):!Object.is(o,l))return!1}}return!0}var ga=(e,t,n,s,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:i||!0}}:{},Lt=e=>Array.isArray(e)?e:[e],nr=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}};function Fr(e,t){const n={};for(const s in e)if(e.hasOwnProperty(s)){const i=e[s],a=t[s];if(i&&se(i)&&a){const o=Fr(i,a);se(o)&&(n[s]=o)}else e[s]&&(n[s]=a)}return n}var ye=e=>se(e)&&!Object.keys(e).length,Un=e=>e.type==="file",Ie=e=>typeof e=="function",rn=e=>{if(!In)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Tr=e=>e.type==="select-multiple",Bn=e=>e.type==="radio",va=e=>Bn(e)||Kt(e),Nn=e=>rn(e)&&e.isConnected;function xa(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=ee(e)?s++:e[t[s++]];return e}function pa(e){for(const t in e)if(e.hasOwnProperty(t)&&!ee(e[t]))return!1;return!0}function re(e,t){const n=Array.isArray(t)?t:mn(t)?[t]:zn(t),s=n.length===1?e:xa(e,n),i=n.length-1,a=n[i];return s&&delete s[a],i!==0&&(se(s)&&ye(s)||Array.isArray(s)&&pa(s))&&re(e,n.slice(0,-1)),e}var ya=e=>{for(const t in e)if(Ie(e[t]))return!0;return!1};function Or(e){return Array.isArray(e)||se(e)&&!ya(e)}function Rn(e,t={}){for(const n in e){const s=e[n];Or(s)?(t[n]=Array.isArray(s)?[]:{},Rn(s,t[n])):ee(s)||(t[n]=!0)}return t}function ht(e,t,n){n||(n=Rn(t));for(const s in e){const i=e[s];if(Or(i))ee(t)||An(n[s])?n[s]=Rn(i,Array.isArray(i)?[]:{}):ht(i,we(t)?{}:t[s],n[s]);else{const a=t[s];n[s]=!at(i,a)}}return n}const rr={value:!1,isValid:!1},sr={value:!0,isValid:!0};var Mr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ee(e[0].attributes.value)?ee(e[0].value)||e[0].value===""?sr:{value:e[0].value,isValid:!0}:sr:rr}return rr},Ir=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>ee(e)?e:t?e===""?NaN:e&&+e:n&&_e(e)?new Date(e):s?s(e):e;const ar={isValid:!1,value:null};var Pr=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,ar):ar;function ir(e){const t=e.ref;return Un(t)?t.files:Bn(t)?Pr(e.refs).value:Tr(t)?[...t.selectedOptions].map(({value:n})=>n):Kt(t)?Mr(e.refs).value:Ir(ee(t.value)?e.ref.value:t.value,e)}var ba=(e,t,n,s)=>{const i={};for(const a of e){const o=_(t,a);o&&J(i,a,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:s}},sn=e=>e instanceof RegExp,Et=e=>ee(e)?e:sn(e)?e.source:se(e)?sn(e.value)?e.value.source:e.value:e,or=e=>({isOnSubmit:!e||e===Me.onSubmit,isOnBlur:e===Me.onBlur,isOnChange:e===Me.onChange,isOnAll:e===Me.all,isOnTouch:e===Me.onTouched});const lr="AsyncFunction";var wa=e=>!!e&&!!e.validate&&!!(Ie(e.validate)&&e.validate.constructor.name===lr||se(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===lr)),ja=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),cr=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Vt=(e,t,n,s)=>{for(const i of n||Object.keys(e)){const a=_(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!s)return!0;if(o.ref&&t(o.ref,o.name)&&!s)return!0;if(Vt(l,t))break}else if(se(l)&&Vt(l,t))break}}};function dr(e,t,n){const s=_(e,n);if(s||mn(n))return{error:s,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=_(t,a),l=_(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};i.pop()}return{name:n}}var Na=(e,t,n,s)=>{n(e);const{name:i,...a}=e;return ye(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!s||Me.all))},Sa=(e,t,n)=>!e||!t||e===t||Lt(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),Ca=(e,t,n,s,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?s.isOnBlur:i.isOnBlur)?!e:(n?s.isOnChange:i.isOnChange)?e:!0,Da=(e,t)=>!Pn(_(e,t)).length&&re(e,t),ka=(e,t,n)=>{const s=Lt(_(e,n));return J(s,"root",t[n]),J(e,n,s),e};function ur(e,t,n="validate"){if(_e(e)||Array.isArray(e)&&e.every(_e)||We(e)&&!e)return{type:n,message:_e(e)?e:"",ref:t}}var ft=e=>se(e)&&!sn(e)?e:{value:e,message:""},fr=async(e,t,n,s,i,a)=>{const{ref:o,refs:l,required:u,maxLength:m,minLength:v,min:f,max:p,pattern:j,validate:k,name:b,valueAsNumber:C,mount:R}=e._f,w=_(n,b);if(!R||t.has(b))return{};const A=l?l[0]:o,V=F=>{i&&A.reportValidity&&(A.setCustomValidity(We(F)?"":F||""),A.reportValidity())},D={},M=Bn(o),L=Kt(o),O=M||L,z=(C||Un(o))&&ee(o.value)&&ee(w)||rn(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,$=ga.bind(null,b,s,D),I=(F,T,K,G=Je.maxLength,Q=Je.minLength)=>{const q=F?T:K;D[b]={type:F?G:Q,message:q,ref:o,...$(F?G:Q,q)}};if(a?!Array.isArray(w)||!w.length:u&&(!O&&(z||we(w))||We(w)&&!w||L&&!Mr(l).isValid||M&&!Pr(l).isValid)){const{value:F,message:T}=_e(u)?{value:!!u,message:u}:ft(u);if(F&&(D[b]={type:Je.required,message:T,ref:A,...$(Je.required,T)},!s))return V(T),D}if(!z&&(!we(f)||!we(p))){let F,T;const K=ft(p),G=ft(f);if(!we(w)&&!isNaN(w)){const Q=o.valueAsNumber||w&&+w;we(K.value)||(F=Q>K.value),we(G.value)||(T=Q<G.value)}else{const Q=o.valueAsDate||new Date(w),q=je=>new Date(new Date().toDateString()+" "+je),Ee=o.type=="time",te=o.type=="week";_e(K.value)&&w&&(F=Ee?q(w)>q(K.value):te?w>K.value:Q>new Date(K.value)),_e(G.value)&&w&&(T=Ee?q(w)<q(G.value):te?w<G.value:Q<new Date(G.value))}if((F||T)&&(I(!!F,K.message,G.message,Je.max,Je.min),!s))return V(D[b].message),D}if((m||v)&&!z&&(_e(w)||a&&Array.isArray(w))){const F=ft(m),T=ft(v),K=!we(F.value)&&w.length>+F.value,G=!we(T.value)&&w.length<+T.value;if((K||G)&&(I(K,F.message,T.message),!s))return V(D[b].message),D}if(j&&!z&&_e(w)){const{value:F,message:T}=ft(j);if(sn(F)&&!w.match(F)&&(D[b]={type:Je.pattern,message:T,ref:o,...$(Je.pattern,T)},!s))return V(T),D}if(k){if(Ie(k)){const F=await k(w,n),T=ur(F,A);if(T&&(D[b]={...T,...$(Je.validate,T.message)},!s))return V(T.message),D}else if(se(k)){let F={};for(const T in k){if(!ye(F)&&!s)break;const K=ur(await k[T](w,n),A,T);K&&(F={...K,...$(T,K.message)},V(K.message),s&&(D[b]=F))}if(!ye(F)&&(D[b]={ref:A,...F},!s))return D}}return V(!0),D};const _a={mode:Me.onSubmit,reValidateMode:Me.onChange,shouldFocusError:!0};function Ea(e={}){let t={..._a,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ie(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},i=se(t.defaultValues)||se(t.values)?le(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:le(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,m=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...v};const p={array:nr(),state:nr()},j=t.criteriaMode===Me.all,k=c=>d=>{clearTimeout(m),m=setTimeout(c,d)},b=async c=>{if(!t.disabled&&(v.isValid||f.isValid||c)){const d=t.resolver?ye((await L()).errors):await z(s,!0);d!==n.isValid&&p.state.next({isValid:d})}},C=(c,d)=>{!t.disabled&&(v.isValidating||v.validatingFields||f.isValidating||f.validatingFields)&&((c||Array.from(l.mount)).forEach(g=>{g&&(d?J(n.validatingFields,g,d):re(n.validatingFields,g))}),p.state.next({validatingFields:n.validatingFields,isValidating:!ye(n.validatingFields)}))},R=(c,d=[],g,S,N=!0,y=!0)=>{if(S&&g&&!t.disabled){if(o.action=!0,y&&Array.isArray(_(s,c))){const E=g(_(s,c),S.argA,S.argB);N&&J(s,c,E)}if(y&&Array.isArray(_(n.errors,c))){const E=g(_(n.errors,c),S.argA,S.argB);N&&J(n.errors,c,E),Da(n.errors,c)}if((v.touchedFields||f.touchedFields)&&y&&Array.isArray(_(n.touchedFields,c))){const E=g(_(n.touchedFields,c),S.argA,S.argB);N&&J(n.touchedFields,c,E)}(v.dirtyFields||f.dirtyFields)&&(n.dirtyFields=ht(i,a)),p.state.next({name:c,isDirty:I(c,d),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else J(a,c,d)},w=(c,d)=>{J(n.errors,c,d),p.state.next({errors:n.errors})},A=c=>{n.errors=c,p.state.next({errors:n.errors,isValid:!1})},V=(c,d,g,S)=>{const N=_(s,c);if(N){const y=_(a,c,ee(g)?_(i,c):g);ee(y)||S&&S.defaultChecked||d?J(a,c,d?y:ir(N._f)):K(c,y),o.mount&&!o.action&&b()}},D=(c,d,g,S,N)=>{let y=!1,E=!1;const U={name:c};if(!t.disabled){if(!g||S){(v.isDirty||f.isDirty)&&(E=n.isDirty,n.isDirty=U.isDirty=I(),y=E!==U.isDirty);const H=at(_(i,c),d);E=!!_(n.dirtyFields,c),H?re(n.dirtyFields,c):J(n.dirtyFields,c,!0),U.dirtyFields=n.dirtyFields,y=y||(v.dirtyFields||f.dirtyFields)&&E!==!H}if(g){const H=_(n.touchedFields,c);H||(J(n.touchedFields,c,g),U.touchedFields=n.touchedFields,y=y||(v.touchedFields||f.touchedFields)&&H!==g)}y&&N&&p.state.next(U)}return y?U:{}},M=(c,d,g,S)=>{const N=_(n.errors,c),y=(v.isValid||f.isValid)&&We(d)&&n.isValid!==d;if(t.delayError&&g?(u=k(()=>w(c,g)),u(t.delayError)):(clearTimeout(m),u=null,g?J(n.errors,c,g):re(n.errors,c)),(g?!at(N,g):N)||!ye(S)||y){const E={...S,...y&&We(d)?{isValid:d}:{},errors:n.errors,name:c};n={...n,...E},p.state.next(E)}},L=async c=>{C(c,!0);const d=await t.resolver(a,t.context,ba(c||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return C(c),d},O=async c=>{const{errors:d}=await L(c);if(c)for(const g of c){const S=_(d,g);S?J(n.errors,g,S):re(n.errors,g)}else n.errors=d;return d},z=async(c,d,g={valid:!0})=>{for(const S in c){const N=c[S];if(N){const{_f:y,...E}=N;if(y){const U=l.array.has(y.name),H=N._f&&wa(N._f);H&&v.validatingFields&&C([y.name],!0);const oe=await fr(N,l.disabled,a,j,t.shouldUseNativeValidation&&!d,U);if(H&&v.validatingFields&&C([y.name]),oe[y.name]&&(g.valid=!1,d))break;!d&&(_(oe,y.name)?U?ka(n.errors,oe,y.name):J(n.errors,y.name,oe[y.name]):re(n.errors,y.name))}!ye(E)&&await z(E,d,g)}}return g.valid},$=()=>{for(const c of l.unMount){const d=_(s,c);d&&(d._f.refs?d._f.refs.every(g=>!Nn(g)):!Nn(d._f.ref))&&Te(c)}l.unMount=new Set},I=(c,d)=>!t.disabled&&(c&&d&&J(a,c,d),!at(je(),i)),F=(c,d,g)=>ma(c,l,{...o.mount?a:ee(d)?i:_e(c)?{[c]:d}:d},g,d),T=c=>Pn(_(o.mount?a:i,c,t.shouldUnregister?_(i,c,[]):[])),K=(c,d,g={})=>{const S=_(s,c);let N=d;if(S){const y=S._f;y&&(!y.disabled&&J(a,c,Ir(d,y)),N=rn(y.ref)&&we(d)?"":d,Tr(y.ref)?[...y.ref.options].forEach(E=>E.selected=N.includes(E.value)):y.refs?Kt(y.ref)?y.refs.forEach(E=>{(!E.defaultChecked||!E.disabled)&&(Array.isArray(N)?E.checked=!!N.find(U=>U===E.value):E.checked=N===E.value||!!N)}):y.refs.forEach(E=>E.checked=E.value===N):Un(y.ref)?y.ref.value="":(y.ref.value=N,y.ref.type||p.state.next({name:c,values:le(a)})))}(g.shouldDirty||g.shouldTouch)&&D(c,N,g.shouldTouch,g.shouldDirty,!0),g.shouldValidate&&te(c)},G=(c,d,g)=>{for(const S in d){if(!d.hasOwnProperty(S))return;const N=d[S],y=c+"."+S,E=_(s,y);(l.array.has(c)||se(N)||E&&!E._f)&&!dt(N)?G(y,N,g):K(y,N,g)}},Q=(c,d,g={})=>{const S=_(s,c),N=l.array.has(c),y=le(d);J(a,c,y),N?(p.array.next({name:c,values:le(a)}),(v.isDirty||v.dirtyFields||f.isDirty||f.dirtyFields)&&g.shouldDirty&&p.state.next({name:c,dirtyFields:ht(i,a),isDirty:I(c,y)})):S&&!S._f&&!we(y)?G(c,y,g):K(c,y,g),cr(c,l)&&p.state.next({...n,name:c}),p.state.next({name:o.mount?c:void 0,values:le(a)})},q=async c=>{o.mount=!0;const d=c.target;let g=d.name,S=!0;const N=_(s,g),y=H=>{S=Number.isNaN(H)||dt(H)&&isNaN(H.getTime())||at(H,_(a,g,H))},E=or(t.mode),U=or(t.reValidateMode);if(N){let H,oe;const lt=d.type?ir(N._f):oa(c),de=c.type===tr.BLUR||c.type===tr.FOCUS_OUT,qt=!ja(N._f)&&!t.resolver&&!_(n.errors,g)&&!N._f.deps||Ca(de,_(n.touchedFields,g),n.isSubmitted,U,E),wt=cr(g,l,de);J(a,g,lt),de?(!d||!d.readOnly)&&(N._f.onBlur&&N._f.onBlur(c),u&&u(0)):N._f.onChange&&N._f.onChange(c);const jt=D(g,lt,de),Nt=!ye(jt)||wt;if(!de&&p.state.next({name:g,type:c.type,values:le(a)}),qt)return(v.isValid||f.isValid)&&(t.mode==="onBlur"?de&&b():de||b()),Nt&&p.state.next({name:g,...wt?{}:jt});if(!de&&wt&&p.state.next({...n}),t.resolver){const{errors:St}=await L([g]);if(y(lt),S){const bn=dr(n.errors,s,g),Ct=dr(St,s,bn.name||g);H=Ct.error,g=Ct.name,oe=ye(St)}}else C([g],!0),H=(await fr(N,l.disabled,a,j,t.shouldUseNativeValidation))[g],C([g]),y(lt),S&&(H?oe=!1:(v.isValid||f.isValid)&&(oe=await z(s,!0)));S&&(N._f.deps&&(!Array.isArray(N._f.deps)||N._f.deps.length>0)&&te(N._f.deps),M(g,oe,H,jt))}},Ee=(c,d)=>{if(_(n.errors,d)&&c.focus)return c.focus(),1},te=async(c,d={})=>{let g,S;const N=Lt(c);if(t.resolver){const y=await O(ee(c)?c:N);g=ye(y),S=c?!N.some(E=>_(y,E)):g}else c?(S=(await Promise.all(N.map(async y=>{const E=_(s,y);return await z(E&&E._f?{[y]:E}:E)}))).every(Boolean),!(!S&&!n.isValid)&&b()):S=g=await z(s);return p.state.next({...!_e(c)||(v.isValid||f.isValid)&&g!==n.isValid?{}:{name:c},...t.resolver||!c?{isValid:g}:{},errors:n.errors}),d.shouldFocus&&!S&&Vt(s,Ee,c?N:l.mount),S},je=(c,d)=>{let g={...o.mount?a:i};return d&&(g=Fr(d.dirtyFields?n.dirtyFields:n.touchedFields,g)),ee(c)?g:_e(c)?_(g,c):c.map(S=>_(g,S))},Ae=(c,d)=>({invalid:!!_((d||n).errors,c),isDirty:!!_((d||n).dirtyFields,c),error:_((d||n).errors,c),isValidating:!!_(n.validatingFields,c),isTouched:!!_((d||n).touchedFields,c)}),ne=c=>{c&&Lt(c).forEach(d=>re(n.errors,d)),p.state.next({errors:c?n.errors:{}})},ve=(c,d,g)=>{const S=(_(s,c,{_f:{}})._f||{}).ref,N=_(n.errors,c)||{},{ref:y,message:E,type:U,...H}=N;J(n.errors,c,{...H,...d,ref:S}),p.state.next({name:c,errors:n.errors,isValid:!1}),g&&g.shouldFocus&&S&&S.focus&&S.focus()},Re=(c,d)=>Ie(c)?p.state.subscribe({next:g=>"values"in g&&c(F(void 0,d),g)}):F(c,d,!0),Ue=c=>p.state.subscribe({next:d=>{Sa(c.name,d.name,c.exact)&&Na(d,c.formState||v,et,c.reRenderRoot)&&c.callback({values:{...a},...n,...d,defaultValues:i})}}).unsubscribe,he=c=>(o.mount=!0,f={...f,...c.formState},Ue({...c,formState:f})),Te=(c,d={})=>{for(const g of c?Lt(c):l.mount)l.mount.delete(g),l.array.delete(g),d.keepValue||(re(s,g),re(a,g)),!d.keepError&&re(n.errors,g),!d.keepDirty&&re(n.dirtyFields,g),!d.keepTouched&&re(n.touchedFields,g),!d.keepIsValidating&&re(n.validatingFields,g),!t.shouldUnregister&&!d.keepDefaultValue&&re(i,g);p.state.next({values:le(a)}),p.state.next({...n,...d.keepDirty?{isDirty:I()}:{}}),!d.keepIsValid&&b()},Ne=({disabled:c,name:d})=>{(We(c)&&o.mount||c||l.disabled.has(d))&&(c?l.disabled.add(d):l.disabled.delete(d))},xe=(c,d={})=>{let g=_(s,c);const S=We(d.disabled)||We(t.disabled);return J(s,c,{...g||{},_f:{...g&&g._f?g._f:{ref:{name:c}},name:c,mount:!0,...d}}),l.mount.add(c),g?Ne({disabled:We(d.disabled)?d.disabled:t.disabled,name:c}):V(c,!0,d.value),{...S?{disabled:d.disabled||t.disabled}:{},...t.progressive?{required:!!d.required,min:Et(d.min),max:Et(d.max),minLength:Et(d.minLength),maxLength:Et(d.maxLength),pattern:Et(d.pattern)}:{},name:c,onChange:q,onBlur:q,ref:N=>{if(N){xe(c,d),g=_(s,c);const y=ee(N.value)&&N.querySelectorAll&&N.querySelectorAll("input,select,textarea")[0]||N,E=va(y),U=g._f.refs||[];if(E?U.find(H=>H===y):y===g._f.ref)return;J(s,c,{_f:{...g._f,...E?{refs:[...U.filter(Nn),y,...Array.isArray(_(i,c))?[{}]:[]],ref:{type:y.type,name:c}}:{ref:y}}}),V(c,!1,void 0,y)}else g=_(s,c,{}),g._f&&(g._f.mount=!1),(t.shouldUnregister||d.shouldUnregister)&&!(ca(l.array,c)&&o.action)&&l.unMount.add(c)}}},W=()=>t.shouldFocusError&&Vt(s,Ee,l.mount),Oe=c=>{We(c)&&(p.state.next({disabled:c}),Vt(s,(d,g)=>{const S=_(s,g);S&&(d.disabled=S._f.disabled||c,Array.isArray(S._f.refs)&&S._f.refs.forEach(N=>{N.disabled=S._f.disabled||c}))},0,!1))},pe=(c,d)=>async g=>{let S;g&&(g.preventDefault&&g.preventDefault(),g.persist&&g.persist());let N=le(a);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:y,values:E}=await L();n.errors=y,N=le(E)}else await z(s);if(l.disabled.size)for(const y of l.disabled)re(N,y);if(re(n.errors,"root"),ye(n.errors)){p.state.next({errors:{}});try{await c(N,g)}catch(y){S=y}}else d&&await d({...n.errors},g),W(),setTimeout(W);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ye(n.errors)&&!S,submitCount:n.submitCount+1,errors:n.errors}),S)throw S},Le=(c,d={})=>{_(s,c)&&(ee(d.defaultValue)?Q(c,le(_(i,c))):(Q(c,d.defaultValue),J(i,c,le(d.defaultValue))),d.keepTouched||re(n.touchedFields,c),d.keepDirty||(re(n.dirtyFields,c),n.isDirty=d.defaultValue?I(c,le(_(i,c))):I()),d.keepError||(re(n.errors,c),v.isValid&&b()),p.state.next({...n}))},x=(c,d={})=>{const g=c?le(c):i,S=le(g),N=ye(c),y=N?i:S;if(d.keepDefaultValues||(i=g),!d.keepValues){if(d.keepDirtyValues){const E=new Set([...l.mount,...Object.keys(ht(i,a))]);for(const U of Array.from(E))_(n.dirtyFields,U)?J(y,U,_(a,U)):Q(U,_(y,U))}else{if(In&&ee(c))for(const E of l.mount){const U=_(s,E);if(U&&U._f){const H=Array.isArray(U._f.refs)?U._f.refs[0]:U._f.ref;if(rn(H)){const oe=H.closest("form");if(oe){oe.reset();break}}}}if(d.keepFieldsRef)for(const E of l.mount)Q(E,_(y,E));else s={}}a=t.shouldUnregister?d.keepDefaultValues?le(i):{}:le(y),p.array.next({values:{...y}}),p.state.next({values:{...y}})}l={mount:d.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!v.isValid||!!d.keepIsValid||!!d.keepDirtyValues||!t.shouldUnregister&&!ye(y),o.watch=!!t.shouldUnregister,o.action=!1,d.keepErrors||(n.errors={}),p.state.next({submitCount:d.keepSubmitCount?n.submitCount:0,isDirty:N?!1:d.keepDirty?n.isDirty:!!(d.keepDefaultValues&&!at(c,i)),isSubmitted:d.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:N?{}:d.keepDirtyValues?d.keepDefaultValues&&a?ht(i,a):n.dirtyFields:d.keepDefaultValues&&c?ht(i,c):d.keepDirty?n.dirtyFields:{},touchedFields:d.keepTouched?n.touchedFields:{},errors:d.keepErrors?n.errors:{},isSubmitSuccessful:d.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},P=(c,d)=>x(Ie(c)?c(a):c,d),Z=(c,d={})=>{const g=_(s,c),S=g&&g._f;if(S){const N=S.refs?S.refs[0]:S.ref;N.focus&&(N.focus(),d.shouldSelect&&Ie(N.select)&&N.select())}},et=c=>{n={...n,...c}},Se={control:{register:xe,unregister:Te,getFieldState:Ae,handleSubmit:pe,setError:ve,_subscribe:Ue,_runSchema:L,_focusError:W,_getWatch:F,_getDirty:I,_setValid:b,_setFieldArray:R,_setDisabledField:Ne,_setErrors:A,_getFieldArray:T,_reset:x,_resetDefaultValues:()=>Ie(t.defaultValues)&&t.defaultValues().then(c=>{P(c,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:$,_disableForm:Oe,_subjects:p,_proxyFormState:v,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state(c){o=c},get _defaultValues(){return i},get _names(){return l},set _names(c){l=c},get _formState(){return n},get _options(){return t},set _options(c){t={...t,...c}}},subscribe:he,trigger:te,register:xe,handleSubmit:pe,watch:Re,setValue:Q,getValues:je,reset:P,resetField:Le,clearErrors:ne,unregister:Te,setError:ve,setFocus:Z,getFieldState:Ae};return{...Se,formControl:Se}}function zr(e={}){const t=B.useRef(void 0),n=B.useRef(void 0),[s,i]=B.useState({isDirty:!1,isValidating:!1,isLoading:Ie(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ie(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Ie(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=Ea(e);t.current={...l,formState:s}}const a=t.current.control;return a._options=e,ha(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),B.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),B.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),B.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),B.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),B.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==s.isDirty&&a._subjects.state.next({isDirty:o})}},[a,s.isDirty]),B.useEffect(()=>{var o;e.values&&!at(e.values,n.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),!((o=a._options.resetOptions)===null||o===void 0)&&o.keepIsValid||a._setValid(),n.current=e.values,i(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),B.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=fa(s,a),t.current}function Aa(){const[e,t]=h.useState(!1),n=Ds(),{data:s}=On(),{register:i,handleSubmit:a,reset:o,setValue:l,watch:u,formState:{errors:m}}=zr({defaultValues:{status:"new",source_type:"manual"}}),v=async f=>{try{await n.mutateAsync({...f,company_name:f.company_name||null,email:f.email||null,phone:f.phone||null,address:f.address||null,postal_code:f.postal_code||null,region_id:f.region_id||null,notes:f.notes||null}),ge.success("Lead bol úspešne vytvorený"),t(!1),o()}catch(p){console.error("Create lead error:",p);const j=p?.message||"Neznáma chyba",k=p?.details||"";ge.error(`Nepodarilo sa vytvoriť lead: ${j} ${k}`)}};return r.jsxs(zt,{open:e,onOpenChange:t,children:[r.jsx(Gn,{asChild:!0,children:r.jsx(ie,{className:"md:hidden min-h-[44px] min-w-[44px]",size:"icon",title:"Nový lead",children:r.jsx(nn,{className:"h-4 w-4"})})}),r.jsx(Gn,{asChild:!0,children:r.jsxs(ie,{className:"hidden md:flex",children:[r.jsx(nn,{className:"h-4 w-4 mr-2"}),"Nový lead"]})}),r.jsxs(Ut,{className:"max-w-[95vw] sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(Bt,{children:[r.jsx($t,{children:"Vytvoriť nový lead"}),r.jsx(fn,{children:"Vyplňte informácie o novom potenciálnom klientovi."})]}),r.jsxs("form",{onSubmit:a(v),className:"space-y-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"contact_name",children:"Meno kontaktu *"}),r.jsx(Qe,{id:"contact_name",...i("contact_name",{required:!0}),className:m.contact_name?"border-destructive":""}),m.contact_name&&r.jsx("span",{className:"text-xs text-destructive",children:"Toto pole je povinné"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"company_name",children:"Názov firmy"}),r.jsx(Qe,{id:"company_name",...i("company_name")})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"email",children:"Email"}),r.jsx(Qe,{id:"email",type:"email",...i("email")})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"phone",children:"Telefón"}),r.jsx(Qe,{id:"phone",...i("phone")})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"source",children:"Zdroj"}),r.jsxs(He,{onValueChange:f=>l("source_type",f),defaultValue:"manual",children:[r.jsx(Xe,{children:r.jsx(Ye,{placeholder:"Vyberte zdroj"})}),r.jsxs(qe,{children:[r.jsx(X,{value:"manual",children:"Manuálne"}),r.jsx(X,{value:"website_form",children:"Web formulár"}),r.jsx(X,{value:"facebook_lead_ads",children:"Facebook Lead Ads"}),r.jsx(X,{value:"facebook_ads",children:"Facebook Ads"}),r.jsx(X,{value:"google_ads",children:"Google Ads"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"status",children:"Status"}),r.jsxs(He,{onValueChange:f=>l("status",f),defaultValue:"new",children:[r.jsx(Xe,{children:r.jsx(Ye,{placeholder:"Vyberte status"})}),r.jsxs(qe,{children:[r.jsx(X,{value:"new",children:"Nový"}),r.jsx(X,{value:"contacted",children:"Kontaktovaný"}),r.jsx(X,{value:"offer",children:"Ponuka"}),r.jsx(X,{value:"won",children:"Vyhraný"}),r.jsx(X,{value:"lost",children:"Stratený"}),r.jsx(X,{value:"waiting",children:"Čaká sa"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"region",children:"Región"}),r.jsxs(He,{onValueChange:f=>l("region_id",f),children:[r.jsx(Xe,{children:r.jsx(Ye,{placeholder:"Vyberte región"})}),r.jsx(qe,{children:s?.map(f=>r.jsx(X,{value:f.id,children:f.name},f.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"notes",children:"Poznámka"}),r.jsx(_r,{id:"notes",...i("notes")})]}),r.jsxs(hn,{children:[r.jsx(ie,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Zrušiť"}),r.jsx(ie,{type:"submit",disabled:n.isPending,children:n.isPending?"Vytváranie...":"Vytvoriť lead"})]})]})]})]})}const Ra={call:r.jsx(xt,{className:"h-4 w-4"}),email:r.jsx(vt,{className:"h-4 w-4"}),meeting:r.jsx(Mn,{className:"h-4 w-4"}),note:r.jsx(Vs,{className:"h-4 w-4"}),status_change:r.jsx(_n,{className:"h-4 w-4"})};function Ur({lead:e,open:t,onOpenChange:n,statusLabels:s,sourceLabels:i,getRegionName:a,onEdit:o}){const{data:l=[],isLoading:u}=Ls({entityType:"lead",entityId:e?.id,limit:5});return e?r.jsx(zt,{open:t,onOpenChange:n,children:r.jsxs(Ut,{className:"max-w-[95vw] sm:max-w-[600px] max-h-[85vh] overflow-y-auto",children:[r.jsxs(Bt,{children:[r.jsxs("div",{className:"flex items-center justify-between mr-8",children:[r.jsx($t,{className:"text-xl",children:e.contact_name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(gt,{variant:e.status,children:s[e.status]}),o&&r.jsx(ie,{variant:"outline",size:"sm",onClick:o,children:"Upraviť"})]})]}),e.company_name&&r.jsx("p",{className:"text-muted-foreground mt-1",children:e.company_name})]}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("section",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Kontaktné údaje"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.email&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(vt,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("a",{href:`mailto:${e.email}`,className:"hover:underline",children:e.email})]}),e.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(xt,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("a",{href:`tel:${e.phone}`,className:"hover:underline",children:e.phone})]}),(e.address||e.postal_code)&&r.jsxs("div",{className:"flex items-start gap-2 text-sm sm:col-span-2",children:[r.jsx(Rr,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),r.jsx("span",{children:[e.address,e.postal_code].filter(Boolean).join(", ")})]})]})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Informácie"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(En,{className:"h-3 w-3"})," Zdroj"]}),r.jsx("p",{className:"text-sm font-medium",children:i[e.source_type]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(Fs,{className:"h-3 w-3"})," Región"]}),r.jsx("p",{className:"text-sm font-medium",children:a(e.region_id)})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(ws,{className:"h-3 w-3"})," Priradené"]}),r.jsx("p",{className:"text-sm font-medium",children:e.assigned_user?.full_name||"Nepriradené"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(Mn,{className:"h-3 w-3"})," Vytvorené"]}),r.jsx("p",{className:"text-sm font-medium",children:new Date(e.created_at).toLocaleDateString("sk-SK")})]})]})]}),e.notes&&r.jsxs("section",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Poznámka"}),r.jsx("div",{className:"bg-muted/50 p-4 rounded-lg text-sm whitespace-pre-wrap",children:e.notes})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Posledné aktivity"})]}),u?r.jsx("div",{className:"space-y-3",children:[1,2,3].map(m=>r.jsx(Tn,{className:"h-16 w-full"},m))}):l.length===0?r.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground bg-muted/30 rounded-lg",children:"Žiadne aktivity"}):r.jsx("div",{className:"space-y-3",children:l.map(m=>r.jsxs("div",{className:"flex gap-3 p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[r.jsx("div",{className:"text-primary mt-0.5",children:Ra[m.activity_type]||r.jsx(js,{className:"h-4 w-4"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("p",{className:"text-sm font-medium text-foreground",children:m.title}),r.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(m.created_at).toLocaleDateString("sk-SK")})]}),m.description&&r.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:m.description})]})]},m.id))})]})]})]})}):null}function La({lead:e,open:t,onOpenChange:n}){const[s,i]=h.useState(""),a=ks(),{data:o=[],isLoading:l}=Lr(),u=async()=>{if(!(!e||!s))try{await a.mutateAsync({leadId:e.id,userId:s}),ge.success("Lead bol úspešne priradený"),n(!1),i("")}catch{ge.error("Nepodarilo sa priradiť lead")}};return e?r.jsx(zt,{open:t,onOpenChange:n,children:r.jsxs(Ut,{className:"sm:max-w-[425px]",children:[r.jsxs(Bt,{children:[r.jsx($t,{children:"Priradiť lead"}),r.jsxs(fn,{children:["Vyberte obchodníka, ktorému chcete priradiť lead ",r.jsx("strong",{children:e.contact_name}),"."]})]}),r.jsx("div",{className:"grid gap-4 py-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"user",children:"Obchodník"}),r.jsxs(He,{value:s,onValueChange:i,disabled:l,children:[r.jsx(Xe,{children:r.jsx(Ye,{placeholder:l?"Načítavam...":"Vyberte obchodníka"})}),r.jsx(qe,{children:o.map(m=>r.jsx(X,{value:m.id,children:m.full_name},m.id))})]})]})}),r.jsxs(hn,{children:[r.jsx(ie,{variant:"outline",onClick:()=>n(!1),children:"Zrušiť"}),r.jsx(ie,{onClick:u,disabled:!s||a.isPending||l,children:a.isPending?"Priraďovanie...":"Priradiť"})]})]})}):null}function Va({lead:e,open:t,onOpenChange:n}){const s=_s(),{data:i}=On(),{register:a,handleSubmit:o,reset:l,setValue:u,formState:{errors:m}}=zr();h.useEffect(()=>{e&&t&&l({contact_name:e.contact_name,company_name:e.company_name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",postal_code:e.postal_code||"",region_id:e.region_id||"",status:e.status,source_type:e.source_type,notes:e.notes||""})},[e,t,l]);const v=async f=>{if(e)try{await s.mutateAsync({id:e.id,...f,company_name:f.company_name||null,email:f.email||null,phone:f.phone||null,address:f.address||null,postal_code:f.postal_code||null,region_id:f.region_id||null,notes:f.notes||null}),ge.success("Lead bol úspešne aktualizovaný"),n(!1)}catch(p){ge.error("Nepodarilo sa aktualizovať lead"),console.error(p)}};return r.jsx(zt,{open:t,onOpenChange:n,children:r.jsxs(Ut,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(Bt,{children:[r.jsx($t,{children:"Upraviť lead"}),r.jsx(fn,{children:"Upravte informácie o potenciálnom klientovi."})]}),r.jsxs("form",{onSubmit:o(v),className:"space-y-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-contact_name",children:"Meno kontaktu *"}),r.jsx(Qe,{id:"edit-contact_name",...a("contact_name",{required:!0}),className:m.contact_name?"border-destructive":""}),m.contact_name&&r.jsx("span",{className:"text-xs text-destructive",children:"Toto pole je povinné"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-company_name",children:"Názov firmy"}),r.jsx(Qe,{id:"edit-company_name",...a("company_name")})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-email",children:"Email"}),r.jsx(Qe,{id:"edit-email",type:"email",...a("email")})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-phone",children:"Telefón"}),r.jsx(Qe,{id:"edit-phone",...a("phone")})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-source",children:"Zdroj"}),r.jsxs(He,{onValueChange:f=>u("source_type",f),defaultValue:e?.source_type,value:e?e.source_type:void 0,children:[r.jsx(Xe,{children:r.jsx(Ye,{placeholder:"Vyberte zdroj"})}),r.jsxs(qe,{children:[r.jsx(X,{value:"manual",children:"Manuálne"}),r.jsx(X,{value:"website_form",children:"Web formulár"}),r.jsx(X,{value:"facebook_lead_ads",children:"Facebook Lead Ads"}),r.jsx(X,{value:"facebook_ads",children:"Facebook Ads"}),r.jsx(X,{value:"google_ads",children:"Google Ads"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-status",children:"Status"}),r.jsxs(He,{onValueChange:f=>u("status",f),defaultValue:e?.status,children:[r.jsx(Xe,{children:r.jsx(Ye,{placeholder:"Vyberte status"})}),r.jsxs(qe,{children:[r.jsx(X,{value:"new",children:"Nový"}),r.jsx(X,{value:"contacted",children:"Kontaktovaný"}),r.jsx(X,{value:"offer",children:"Ponuka"}),r.jsx(X,{value:"won",children:"Vyhraný"}),r.jsx(X,{value:"lost",children:"Stratený"}),r.jsx(X,{value:"waiting",children:"Čaká sa"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-region",children:"Región"}),r.jsxs(He,{onValueChange:f=>u("region_id",f),defaultValue:e?.region_id||void 0,children:[r.jsx(Xe,{children:r.jsx(Ye,{placeholder:"Vyberte región"})}),r.jsx(qe,{children:i?.map(f=>r.jsx(X,{value:f.id,children:f.name},f.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{htmlFor:"edit-notes",children:"Poznámka"}),r.jsx(_r,{id:"edit-notes",...a("notes")})]}),r.jsxs(hn,{children:[r.jsx(ie,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Zrušiť"}),r.jsx(ie,{type:"submit",disabled:s.isPending,children:s.isPending?"Ukladám...":"Uložiť zmeny"})]})]})]})})}function Fa({lead:e,open:t,onOpenChange:n}){const s=kr(),i=Es(),[a,o]=h.useState(!1);if(!e)return null;const l=async()=>{try{o(!0);const u=await i.mutateAsync(e.id);ge.success("Lead úspešne konvertovaný na klienta!",{description:`${u.activitiesCopied} aktivít bolo prenesených`,action:{label:"Zobraziť klienta",onClick:()=>s("/clients")}}),n(!1)}catch(u){ge.error("Chyba pri konverzii",{description:u.message||"Nepodarilo sa konvertovať lead na klienta"})}finally{o(!1)}};return r.jsx(zt,{open:t,onOpenChange:n,children:r.jsxs(Ut,{className:"sm:max-w-[600px]",children:[r.jsxs(Bt,{children:[r.jsxs($t,{className:"flex items-center gap-2",children:[r.jsx(Jn,{className:"h-5 w-5 text-primary"}),"Konvertovať lead na klienta"]}),r.jsx(fn,{children:"Tento lead bude konvertovaný na klienta. Všetky údaje a aktivity budú prenesené."})]}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Informácie leadu"}),r.jsx(gt,{variant:"info",children:"Lead"})]}),r.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4 space-y-3",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h3",{className:"font-semibold text-lg",children:e.contact_name})}),e.company_name&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(Ns,{className:"h-4 w-4"}),r.jsx("span",{children:e.company_name})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.email&&r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:e.email})]}),e.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(xt,{className:"h-4 w-4"}),r.jsx("span",{children:e.phone})]}),e.address&&r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground sm:col-span-2",children:[r.jsx(Rr,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:e.address})]})]}),e.notes&&r.jsxs("div",{className:"pt-2 border-t border-border/50",children:[r.jsx("p",{className:"text-xs text-muted-foreground font-medium mb-1",children:"Poznámky:"}),r.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap line-clamp-3",children:e.notes})]})]})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:r.jsx(Jn,{className:"h-6 w-6 text-primary"})})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Nový klient"}),r.jsx(gt,{variant:"success",children:"Klient"})]}),r.jsxs("div",{className:"rounded-lg border border-primary/20 bg-primary/5 p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_n,{className:"h-5 w-5 text-primary"}),r.jsx("p",{className:"text-sm font-medium",children:"Klient bude vytvorený s nasledujúcimi údajmi:"})]}),r.jsxs("ul",{className:"text-sm space-y-2 ml-7 text-muted-foreground",children:[r.jsxs("li",{children:["• Kontaktné meno: ",r.jsx("span",{className:"text-foreground font-medium",children:e.contact_name})]}),e.company_name&&r.jsxs("li",{children:["• Firma: ",r.jsx("span",{className:"text-foreground font-medium",children:e.company_name})]}),e.email&&r.jsxs("li",{children:["• Email: ",r.jsx("span",{className:"text-foreground font-medium",children:e.email})]}),e.phone&&r.jsxs("li",{children:["• Telefón: ",r.jsx("span",{className:"text-foreground font-medium",children:e.phone})]}),r.jsxs("li",{children:["• Status: ",r.jsx("span",{className:"text-success font-medium",children:"Aktívny"})]}),r.jsx("li",{children:"• Všetky aktivity budú prenesené"})]})]})]}),r.jsx("div",{className:"rounded-lg bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 p-4",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"text-amber-600 dark:text-amber-400 mt-0.5",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h5",{className:"text-sm font-medium text-amber-900 dark:text-amber-100 mb-1",children:"Dôležité"}),r.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:'Lead bude automaticky označený ako "Vyhraný" a už nebude možné túto akciu vrátiť späť.'})]})]})})]}),r.jsxs(hn,{children:[r.jsx(ie,{variant:"outline",onClick:()=>n(!1),disabled:a,children:"Zrušiť"}),r.jsx(ie,{onClick:l,disabled:a,className:"min-w-[140px]",children:a?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"animate-spin mr-2",children:"⏳"}),"Konvertujem..."]}):r.jsxs(r.Fragment,{children:[r.jsx(_n,{className:"mr-2 h-4 w-4"}),"Konvertovať"]})})]})]})})}function Ta(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.useMemo(()=>s=>{t.forEach(i=>i(s))},t)}const gn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function $n(e){return"nodeType"in e}function be(e){var t,n;return e?pt(e)?e:$n(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Kn(e){const{Document:t}=be(e);return e instanceof t}function Wt(e){return pt(e)?!1:e instanceof be(e).HTMLElement}function Br(e){return e instanceof be(e).SVGElement}function yt(e){return e?pt(e)?e.document:$n(e)?Kn(e)?e:Wt(e)||Br(e)?e.ownerDocument:document:document:document}const Pe=gn?h.useLayoutEffect:h.useEffect;function vn(e){const t=h.useRef(e);return Pe(()=>{t.current=e}),h.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t.current==null?void 0:t.current(...s)},[])}function Oa(){const e=h.useRef(null),t=h.useCallback((s,i)=>{e.current=setInterval(s,i)},[]),n=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Mt(e,t){t===void 0&&(t=[e]);const n=h.useRef(e);return Pe(()=>{n.current!==e&&(n.current=e)},t),n}function Ht(e,t){const n=h.useRef();return h.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function an(e){const t=vn(e),n=h.useRef(null),s=h.useCallback(i=>{i!==n.current&&t?.(i,n.current),n.current=i},[]);return[n,s]}function on(e){const t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}let Sn={};function Xt(e,t){return h.useMemo(()=>{if(t)return t;const n=Sn[e]==null?0:Sn[e]+1;return Sn[e]=n,e+"-"+n},[e,t])}function $r(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((a,o)=>{const l=Object.entries(o);for(const[u,m]of l){const v=a[u];v!=null&&(a[u]=v+e*m)}return a},{...t})}}const mt=$r(1),ln=$r(-1);function Ma(e){return"clientX"in e&&"clientY"in e}function xn(e){if(!e)return!1;const{KeyboardEvent:t}=be(e.target);return t&&e instanceof t}function Ia(e){if(!e)return!1;const{TouchEvent:t}=be(e.target);return t&&e instanceof t}function cn(e){if(Ia(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Ma(e)?{x:e.clientX,y:e.clientY}:null}const it=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[it.Translate.toString(e),it.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),hr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Pa(e){return e.matches(hr)?e:e.querySelector(hr)}const za={display:"none"};function Ua(e){let{id:t,value:n}=e;return B.createElement("div",{id:t,style:za},n)}function Ba(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return B.createElement("div",{id:t,style:i,role:"status","aria-live":s,"aria-atomic":!0},n)}function $a(){const[e,t]=h.useState("");return{announce:h.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const Kr=h.createContext(null);function Ka(e){const t=h.useContext(Kr);h.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Wa(){const[e]=h.useState(()=>new Set),t=h.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[h.useCallback(s=>{let{type:i,event:a}=s;e.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,a)})},[e]),t]}const Ha={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Xa={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Ya(e){let{announcements:t=Xa,container:n,hiddenTextDescribedById:s,screenReaderInstructions:i=Ha}=e;const{announce:a,announcement:o}=$a(),l=Xt("DndLiveRegion"),[u,m]=h.useState(!1);if(h.useEffect(()=>{m(!0)},[]),Ka(h.useMemo(()=>({onDragStart(f){let{active:p}=f;a(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:j}=f;t.onDragMove&&a(t.onDragMove({active:p,over:j}))},onDragOver(f){let{active:p,over:j}=f;a(t.onDragOver({active:p,over:j}))},onDragEnd(f){let{active:p,over:j}=f;a(t.onDragEnd({active:p,over:j}))},onDragCancel(f){let{active:p,over:j}=f;a(t.onDragCancel({active:p,over:j}))}}),[a,t])),!u)return null;const v=B.createElement(B.Fragment,null,B.createElement(Ua,{id:s,value:i.draggable}),B.createElement(Ba,{id:l,announcement:o}));return n?Rt.createPortal(v,n):v}var ae;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ae||(ae={}));function dn(){}function qa(e,t){return h.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Ga(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const ze=Object.freeze({x:0,y:0});function Za(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ja(e,t){const n=cn(e);if(!n)return"0 0";const s={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function Qa(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function ei(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function mr(e){let{left:t,top:n,height:s,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+s},{x:t+i,y:n+s}]}function ti(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}const ni=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const i=mr(t),a=[];for(const o of s){const{id:l}=o,u=n.get(l);if(u){const m=mr(u),v=i.reduce((p,j,k)=>p+Za(m[k],j),0),f=Number((v/4).toFixed(4));a.push({id:l,data:{droppableContainer:o,value:f}})}}return a.sort(Qa)};function ri(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),o=i-s,l=a-n;if(s<i&&n<a){const u=t.width*t.height,m=e.width*e.height,v=o*l,f=v/(u+m-v);return Number(f.toFixed(4))}return 0}const si=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const i=[];for(const a of s){const{id:o}=a,l=n.get(o);if(l){const u=ri(l,t);u>0&&i.push({id:o,data:{droppableContainer:a,value:u}})}}return i.sort(ei)};function ai(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Wr(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ze}function ii(e){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...n})}}const oi=ii(1);function Hr(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function li(e,t,n){const s=Hr(t);if(!s)return e;const{scaleX:i,scaleY:a,x:o,y:l}=s,u=e.left-o-(1-i)*parseFloat(n),m=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),v=i?e.width/i:e.width,f=a?e.height/a:e.height;return{width:v,height:f,top:m,right:u+v,bottom:m+f,left:u}}const ci={ignoreTransform:!1};function bt(e,t){t===void 0&&(t=ci);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:m,transformOrigin:v}=be(e).getComputedStyle(e);m&&(n=li(n,m,v))}const{top:s,left:i,width:a,height:o,bottom:l,right:u}=n;return{top:s,left:i,width:a,height:o,bottom:l,right:u}}function gr(e){return bt(e,{ignoreTransform:!0})}function di(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function ui(e,t){return t===void 0&&(t=be(e).getComputedStyle(e)),t.position==="fixed"}function fi(e,t){t===void 0&&(t=be(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?n.test(a):!1})}function Wn(e,t){const n=[];function s(i){if(t!=null&&n.length>=t||!i)return n;if(Kn(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Wt(i)||Br(i)||n.includes(i))return n;const a=be(e).getComputedStyle(i);return i!==e&&fi(i,a)&&n.push(i),ui(i,a)?n:s(i.parentNode)}return e?s(e):n}function Xr(e){const[t]=Wn(e,1);return t??null}function Cn(e){return!gn||!e?null:pt(e)?e:$n(e)?Kn(e)||e===yt(e).scrollingElement?window:Wt(e)?e:null:null}function Yr(e){return pt(e)?e.scrollX:e.scrollLeft}function qr(e){return pt(e)?e.scrollY:e.scrollTop}function Ln(e){return{x:Yr(e),y:qr(e)}}var ce;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ce||(ce={}));function Gr(e){return!gn||!e?!1:e===document.scrollingElement}function Zr(e){const t={x:0,y:0},n=Gr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const hi={x:.2,y:.2};function mi(e,t,n,s,i){let{top:a,left:o,right:l,bottom:u}=n;s===void 0&&(s=10),i===void 0&&(i=hi);const{isTop:m,isBottom:v,isLeft:f,isRight:p}=Zr(e),j={x:0,y:0},k={x:0,y:0},b={height:t.height*i.y,width:t.width*i.x};return!m&&a<=t.top+b.height?(j.y=ce.Backward,k.y=s*Math.abs((t.top+b.height-a)/b.height)):!v&&u>=t.bottom-b.height&&(j.y=ce.Forward,k.y=s*Math.abs((t.bottom-b.height-u)/b.height)),!p&&l>=t.right-b.width?(j.x=ce.Forward,k.x=s*Math.abs((t.right-b.width-l)/b.width)):!f&&o<=t.left+b.width&&(j.x=ce.Backward,k.x=s*Math.abs((t.left+b.width-o)/b.width)),{direction:j,speed:k}}function gi(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:t,left:n,right:s,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Jr(e){return e.reduce((t,n)=>mt(t,Ln(n)),ze)}function vi(e){return e.reduce((t,n)=>t+Yr(n),0)}function xi(e){return e.reduce((t,n)=>t+qr(n),0)}function Qr(e,t){if(t===void 0&&(t=bt),!e)return;const{top:n,left:s,bottom:i,right:a}=t(e);Xr(e)&&(i<=0||a<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const pi=[["x",["left","right"],vi],["y",["top","bottom"],xi]];class Hn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Wn(n),i=Jr(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,o,l]of pi)for(const u of o)Object.defineProperty(this,u,{get:()=>{const m=l(s),v=i[a]-m;return this.rect[u]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ft{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var i;(i=this.target)==null||i.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function yi(e){const{EventTarget:t}=be(e);return e instanceof t?e:yt(e)}function Dn(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var Fe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Fe||(Fe={}));function vr(e){e.preventDefault()}function bi(e){e.stopPropagation()}var Y;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Y||(Y={}));const es={start:[Y.Space,Y.Enter],cancel:[Y.Esc],end:[Y.Space,Y.Enter,Y.Tab]},wi=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Y.Right:return{...n,x:n.x+25};case Y.Left:return{...n,x:n.x-25};case Y.Down:return{...n,y:n.y+25};case Y.Up:return{...n,y:n.y-25}}};class ts{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ft(yt(n)),this.windowListeners=new Ft(be(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Fe.Resize,this.handleCancel),this.windowListeners.add(Fe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Fe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&Qr(s),n(ze)}handleKeyDown(t){if(xn(t)){const{active:n,context:s,options:i}=this.props,{keyboardCodes:a=es,coordinateGetter:o=wi,scrollBehavior:l="smooth"}=i,{code:u}=t;if(a.end.includes(u)){this.handleEnd(t);return}if(a.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:m}=s.current,v=m?{x:m.left,y:m.top}:ze;this.referenceCoordinates||(this.referenceCoordinates=v);const f=o(t,{active:n,context:s.current,currentCoordinates:v});if(f){const p=ln(f,v),j={x:0,y:0},{scrollableAncestors:k}=s.current;for(const b of k){const C=t.code,{isTop:R,isRight:w,isLeft:A,isBottom:V,maxScroll:D,minScroll:M}=Zr(b),L=gi(b),O={x:Math.min(C===Y.Right?L.right-L.width/2:L.right,Math.max(C===Y.Right?L.left:L.left+L.width/2,f.x)),y:Math.min(C===Y.Down?L.bottom-L.height/2:L.bottom,Math.max(C===Y.Down?L.top:L.top+L.height/2,f.y))},z=C===Y.Right&&!w||C===Y.Left&&!A,$=C===Y.Down&&!V||C===Y.Up&&!R;if(z&&O.x!==f.x){const I=b.scrollLeft+p.x,F=C===Y.Right&&I<=D.x||C===Y.Left&&I>=M.x;if(F&&!p.y){b.scrollTo({left:I,behavior:l});return}F?j.x=b.scrollLeft-I:j.x=C===Y.Right?b.scrollLeft-D.x:b.scrollLeft-M.x,j.x&&b.scrollBy({left:-j.x,behavior:l});break}else if($&&O.y!==f.y){const I=b.scrollTop+p.y,F=C===Y.Down&&I<=D.y||C===Y.Up&&I>=M.y;if(F&&!p.x){b.scrollTo({top:I,behavior:l});return}F?j.y=b.scrollTop-I:j.y=C===Y.Down?b.scrollTop-D.y:b.scrollTop-M.y,j.y&&b.scrollBy({top:-j.y,behavior:l});break}}this.handleMove(t,mt(ln(f,this.referenceCoordinates),j))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ts.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=es,onActivation:i}=t,{active:a}=n;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function xr(e){return!!(e&&"distance"in e)}function pr(e){return!!(e&&"delay"in e)}class Xn{constructor(t,n,s){var i;s===void 0&&(s=yi(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:o}=a;this.props=t,this.events=n,this.document=yt(o),this.documentListeners=new Ft(this.document),this.listeners=new Ft(s),this.windowListeners=new Ft(be(o)),this.initialCoordinates=(i=cn(a))!=null?i:ze,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Fe.Resize,this.handleCancel),this.windowListeners.add(Fe.DragStart,vr),this.windowListeners.add(Fe.VisibilityChange,this.handleCancel),this.windowListeners.add(Fe.ContextMenu,vr),this.documentListeners.add(Fe.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(pr(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(xr(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:i}=this.props;i(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Fe.Click,bi,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Fe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:l}}=a;if(!i)return;const u=(n=cn(t))!=null?n:ze,m=ln(i,u);if(!s&&l){if(xr(l)){if(l.tolerance!=null&&Dn(m,l.tolerance))return this.handleCancel();if(Dn(m,l.distance))return this.handleStart()}if(pr(l)&&Dn(m,l.tolerance))return this.handleCancel();this.handlePending(l,m);return}t.cancelable&&t.preventDefault(),o(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Y.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ji={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Yn extends Xn{constructor(t){const{event:n}=t,s=yt(n.target);super(t,ji,s)}}Yn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const Ni={move:{name:"mousemove"},end:{name:"mouseup"}};var Vn;(function(e){e[e.RightClick=2]="RightClick"})(Vn||(Vn={}));class Si extends Xn{constructor(t){super(t,Ni,yt(t.event.target))}}Si.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===Vn.RightClick?!1:(s?.({event:n}),!0)}}];const kn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ci extends Xn{constructor(t){super(t,kn)}static setup(){return window.addEventListener(kn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(kn.move.name,t)};function t(){}}}Ci.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:i}=n;return i.length>1?!1:(s?.({event:n}),!0)}}];var Tt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Tt||(Tt={}));var un;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(un||(un={}));function Di(e){let{acceleration:t,activator:n=Tt.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:o=5,order:l=un.TreeOrder,pointerCoordinates:u,scrollableAncestors:m,scrollableAncestorRects:v,delta:f,threshold:p}=e;const j=_i({delta:f,disabled:!a}),[k,b]=Oa(),C=h.useRef({x:0,y:0}),R=h.useRef({x:0,y:0}),w=h.useMemo(()=>{switch(n){case Tt.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Tt.DraggableRect:return i}},[n,i,u]),A=h.useRef(null),V=h.useCallback(()=>{const M=A.current;if(!M)return;const L=C.current.x*R.current.x,O=C.current.y*R.current.y;M.scrollBy(L,O)},[]),D=h.useMemo(()=>l===un.TreeOrder?[...m].reverse():m,[l,m]);h.useEffect(()=>{if(!a||!m.length||!w){b();return}for(const M of D){if(s?.(M)===!1)continue;const L=m.indexOf(M),O=v[L];if(!O)continue;const{direction:z,speed:$}=mi(M,O,w,t,p);for(const I of["x","y"])j[I][z[I]]||($[I]=0,z[I]=0);if($.x>0||$.y>0){b(),A.current=M,k(V,o),C.current=$,R.current=z;return}}C.current={x:0,y:0},R.current={x:0,y:0},b()},[t,V,s,b,a,o,JSON.stringify(w),JSON.stringify(j),k,m,D,v,JSON.stringify(p)])}const ki={x:{[ce.Backward]:!1,[ce.Forward]:!1},y:{[ce.Backward]:!1,[ce.Forward]:!1}};function _i(e){let{delta:t,disabled:n}=e;const s=on(t);return Ht(i=>{if(n||!s||!i)return ki;const a={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[ce.Backward]:i.x[ce.Backward]||a.x===-1,[ce.Forward]:i.x[ce.Forward]||a.x===1},y:{[ce.Backward]:i.y[ce.Backward]||a.y===-1,[ce.Forward]:i.y[ce.Forward]||a.y===1}}},[n,t,s])}function Ei(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return Ht(i=>{var a;return t==null?null:(a=s??i)!=null?a:null},[s,t])}function Ai(e,t){return h.useMemo(()=>e.reduce((n,s)=>{const{sensor:i}=s,a=i.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...n,...a]},[]),[e,t])}var It;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(It||(It={}));var Fn;(function(e){e.Optimized="optimized"})(Fn||(Fn={}));const yr=new Map;function Ri(e,t){let{dragging:n,dependencies:s,config:i}=t;const[a,o]=h.useState(null),{frequency:l,measure:u,strategy:m}=i,v=h.useRef(e),f=C(),p=Mt(f),j=h.useCallback(function(R){R===void 0&&(R=[]),!p.current&&o(w=>w===null?R:w.concat(R.filter(A=>!w.includes(A))))},[p]),k=h.useRef(null),b=Ht(R=>{if(f&&!n)return yr;if(!R||R===yr||v.current!==e||a!=null){const w=new Map;for(let A of e){if(!A)continue;if(a&&a.length>0&&!a.includes(A.id)&&A.rect.current){w.set(A.id,A.rect.current);continue}const V=A.node.current,D=V?new Hn(u(V),V):null;A.rect.current=D,D&&w.set(A.id,D)}return w}return R},[e,a,n,f,u]);return h.useEffect(()=>{v.current=e},[e]),h.useEffect(()=>{f||j()},[n,f]),h.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),h.useEffect(()=>{f||typeof l!="number"||k.current!==null||(k.current=setTimeout(()=>{j(),k.current=null},l))},[l,f,j,...s]),{droppableRects:b,measureDroppableContainers:j,measuringScheduled:a!=null};function C(){switch(m){case It.Always:return!1;case It.BeforeDragging:return n;default:return!n}}}function qn(e,t){return Ht(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Li(e,t){return qn(e,t)}function Vi(e){let{callback:t,disabled:n}=e;const s=vn(t),i=h.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,n]);return h.useEffect(()=>()=>i?.disconnect(),[i]),i}function pn(e){let{callback:t,disabled:n}=e;const s=vn(t),i=h.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[n]);return h.useEffect(()=>()=>i?.disconnect(),[i]),i}function Fi(e){return new Hn(bt(e),e)}function br(e,t,n){t===void 0&&(t=Fi);const[s,i]=h.useState(null);function a(){i(u=>{if(!e)return null;if(e.isConnected===!1){var m;return(m=u??n)!=null?m:null}const v=t(e);return JSON.stringify(u)===JSON.stringify(v)?u:v})}const o=Vi({callback(u){if(e)for(const m of u){const{type:v,target:f}=m;if(v==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),l=pn({callback:a});return Pe(()=>{a(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),s}function Ti(e){const t=qn(e);return Wr(e,t)}const wr=[];function Oi(e){const t=h.useRef(e),n=Ht(s=>e?s&&s!==wr&&e&&t.current&&e.parentNode===t.current.parentNode?s:Wn(e):wr,[e]);return h.useEffect(()=>{t.current=e},[e]),n}function Mi(e){const[t,n]=h.useState(null),s=h.useRef(e),i=h.useCallback(a=>{const o=Cn(a.target);o&&n(l=>l?(l.set(o,Ln(o)),new Map(l)):null)},[]);return h.useEffect(()=>{const a=s.current;if(e!==a){o(a);const l=e.map(u=>{const m=Cn(u);return m?(m.addEventListener("scroll",i,{passive:!0}),[m,Ln(m)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(a)};function o(l){l.forEach(u=>{const m=Cn(u);m?.removeEventListener("scroll",i)})}},[i,e]),h.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,o)=>mt(a,o),ze):Jr(e):ze,[e,t])}function jr(e,t){t===void 0&&(t=[]);const n=h.useRef(null);return h.useEffect(()=>{n.current=null},t),h.useEffect(()=>{const s=e!==ze;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?ln(e,n.current):ze}function Ii(e){h.useEffect(()=>{if(!gn)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Pi(e,t){return h.useMemo(()=>e.reduce((n,s)=>{let{eventName:i,handler:a}=s;return n[i]=o=>{a(o,t)},n},{}),[e,t])}function ns(e){return h.useMemo(()=>e?di(e):null,[e])}const Nr=[];function zi(e,t){t===void 0&&(t=bt);const[n]=e,s=ns(n?be(n):null),[i,a]=h.useState(Nr);function o(){a(()=>e.length?e.map(u=>Gr(u)?s:new Hn(t(u),u)):Nr)}const l=pn({callback:o});return Pe(()=>{l?.disconnect(),o(),e.forEach(u=>l?.observe(u))},[e]),i}function rs(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Wt(t)?t:e}function Ui(e){let{measure:t}=e;const[n,s]=h.useState(null),i=h.useCallback(m=>{for(const{target:v}of m)if(Wt(v)){s(f=>{const p=t(v);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),a=pn({callback:i}),o=h.useCallback(m=>{const v=rs(m);a?.disconnect(),v&&a?.observe(v),s(v?t(v):null)},[t,a]),[l,u]=an(o);return h.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const Bi=[{sensor:Yn,options:{}},{sensor:ts,options:{}}],$i={current:{}},en={draggable:{measure:gr},droppable:{measure:gr,strategy:It.WhileDragging,frequency:Fn.Optimized},dragOverlay:{measure:bt}};class Ot extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const Ki={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ot,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:dn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:en,measureDroppableContainers:dn,windowRect:null,measuringScheduled:!1},ss={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:dn,draggableNodes:new Map,over:null,measureDroppableContainers:dn},Yt=h.createContext(ss),as=h.createContext(Ki);function Wi(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ot}}}function Hi(e,t){switch(t.type){case ae.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ae.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ae.DragEnd:case ae.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ae.RegisterDroppable:{const{element:n}=t,{id:s}=n,i=new Ot(e.droppable.containers);return i.set(s,n),{...e,droppable:{...e.droppable,containers:i}}}case ae.SetDroppableDisabled:{const{id:n,key:s,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||s!==a.key)return e;const o=new Ot(e.droppable.containers);return o.set(n,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:o}}}case ae.UnregisterDroppable:{const{id:n,key:s}=t,i=e.droppable.containers.get(n);if(!i||s!==i.key)return e;const a=new Ot(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Xi(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:i}=h.useContext(Yt),a=on(s),o=on(n?.id);return h.useEffect(()=>{if(!t&&!s&&a&&o!=null){if(!xn(a)||document.activeElement===a.target)return;const l=i.get(o);if(!l)return;const{activatorNode:u,node:m}=l;if(!u.current&&!m.current)return;requestAnimationFrame(()=>{for(const v of[u.current,m.current]){if(!v)continue;const f=Pa(v);if(f){f.focus();break}}})}},[s,t,i,o,a]),null}function is(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...s}),n):n}function Yi(e){return h.useMemo(()=>({draggable:{...en.draggable,...e?.draggable},droppable:{...en.droppable,...e?.droppable},dragOverlay:{...en.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function qi(e){let{activeNode:t,measure:n,initialRect:s,config:i=!0}=e;const a=h.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;Pe(()=>{if(!o&&!l||!t){a.current=!1;return}if(a.current||!s)return;const m=t?.node.current;if(!m||m.isConnected===!1)return;const v=n(m),f=Wr(v,s);if(o||(f.x=0),l||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=Xr(m);p&&p.scrollBy({top:f.y,left:f.x})}},[t,o,l,s,n])}const yn=h.createContext({...ze,scaleX:1,scaleY:1});var st;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(st||(st={}));const Gi=h.memo(function(t){var n,s,i,a;let{id:o,accessibility:l,autoScroll:u=!0,children:m,sensors:v=Bi,collisionDetection:f=si,measuring:p,modifiers:j,...k}=t;const b=h.useReducer(Hi,void 0,Wi),[C,R]=b,[w,A]=Wa(),[V,D]=h.useState(st.Uninitialized),M=V===st.Initialized,{draggable:{active:L,nodes:O,translate:z},droppable:{containers:$}}=C,I=L!=null?O.get(L):null,F=h.useRef({initial:null,translated:null}),T=h.useMemo(()=>{var me;return L!=null?{id:L,data:(me=I?.data)!=null?me:$i,rect:F}:null},[L,I]),K=h.useRef(null),[G,Q]=h.useState(null),[q,Ee]=h.useState(null),te=Mt(k,Object.values(k)),je=Xt("DndDescribedBy",o),Ae=h.useMemo(()=>$.getEnabled(),[$]),ne=Yi(p),{droppableRects:ve,measureDroppableContainers:Re,measuringScheduled:Ue}=Ri(Ae,{dragging:M,dependencies:[z.x,z.y],config:ne.droppable}),he=Ei(O,L),Te=h.useMemo(()=>q?cn(q):null,[q]),Ne=xs(),xe=Li(he,ne.draggable.measure);qi({activeNode:L!=null?O.get(L):null,config:Ne.layoutShiftCompensation,initialRect:xe,measure:ne.draggable.measure});const W=br(he,ne.draggable.measure,xe),Oe=br(he?he.parentElement:null),pe=h.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:ve,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Le=$.getNodeFor((n=pe.current.over)==null?void 0:n.id),x=Ui({measure:ne.dragOverlay.measure}),P=(s=x.nodeRef.current)!=null?s:he,Z=M?(i=x.rect)!=null?i:W:null,et=!!(x.nodeRef.current&&x.rect),ot=Ti(et?null:W),Se=ns(P?be(P):null),c=Oi(M?Le??he:null),d=zi(c),g=is(j,{transform:{x:z.x-ot.x,y:z.y-ot.y,scaleX:1,scaleY:1},activatorEvent:q,active:T,activeNodeRect:W,containerNodeRect:Oe,draggingNodeRect:Z,over:pe.current.over,overlayNodeRect:x.rect,scrollableAncestors:c,scrollableAncestorRects:d,windowRect:Se}),S=Te?mt(Te,z):null,N=Mi(c),y=jr(N),E=jr(N,[W]),U=mt(g,y),H=Z?oi(Z,g):null,oe=T&&H?f({active:T,collisionRect:H,droppableRects:ve,droppableContainers:Ae,pointerCoordinates:S}):null,lt=ti(oe,"id"),[de,qt]=h.useState(null),wt=et?g:mt(g,E),jt=ai(wt,(a=de?.rect)!=null?a:null,W),Nt=h.useRef(null),St=h.useCallback((me,Ce)=>{let{sensor:De,options:tt}=Ce;if(K.current==null)return;const Ve=O.get(K.current);if(!Ve)return;const ke=me.nativeEvent,Be=new De({active:K.current,activeNode:Ve,event:ke,options:tt,context:pe,onAbort(ue){if(!O.get(ue))return;const{onDragAbort:$e}=te.current,Ge={id:ue};$e?.(Ge),w({type:"onDragAbort",event:Ge})},onPending(ue,nt,$e,Ge){if(!O.get(ue))return;const{onDragPending:kt}=te.current,rt={id:ue,constraint:nt,initialCoordinates:$e,offset:Ge};kt?.(rt),w({type:"onDragPending",event:rt})},onStart(ue){const nt=K.current;if(nt==null)return;const $e=O.get(nt);if(!$e)return;const{onDragStart:Ge}=te.current,Dt={activatorEvent:ke,active:{id:nt,data:$e.data,rect:F}};Rt.unstable_batchedUpdates(()=>{Ge?.(Dt),D(st.Initializing),R({type:ae.DragStart,initialCoordinates:ue,active:nt}),w({type:"onDragStart",event:Dt}),Q(Nt.current),Ee(ke)})},onMove(ue){R({type:ae.DragMove,coordinates:ue})},onEnd:ut(ae.DragEnd),onCancel:ut(ae.DragCancel)});Nt.current=Be;function ut(ue){return async function(){const{active:$e,collisions:Ge,over:Dt,scrollAdjustedTranslate:kt}=pe.current;let rt=null;if($e&&kt){const{cancelDrop:_t}=te.current;rt={activatorEvent:ke,active:$e,collisions:Ge,delta:kt,over:Dt},ue===ae.DragEnd&&typeof _t=="function"&&await Promise.resolve(_t(rt))&&(ue=ae.DragCancel)}K.current=null,Rt.unstable_batchedUpdates(()=>{R({type:ue}),D(st.Uninitialized),qt(null),Q(null),Ee(null),Nt.current=null;const _t=ue===ae.DragEnd?"onDragEnd":"onDragCancel";if(rt){const wn=te.current[_t];wn?.(rt),w({type:_t,event:rt})}})}}},[O]),bn=h.useCallback((me,Ce)=>(De,tt)=>{const Ve=De.nativeEvent,ke=O.get(tt);if(K.current!==null||!ke||Ve.dndKit||Ve.defaultPrevented)return;const Be={active:ke};me(De,Ce.options,Be)===!0&&(Ve.dndKit={capturedBy:Ce.sensor},K.current=tt,St(De,Ce))},[O,St]),Ct=Ai(v,bn);Ii(v),Pe(()=>{W&&V===st.Initializing&&D(st.Initialized)},[W,V]),h.useEffect(()=>{const{onDragMove:me}=te.current,{active:Ce,activatorEvent:De,collisions:tt,over:Ve}=pe.current;if(!Ce||!De)return;const ke={active:Ce,activatorEvent:De,collisions:tt,delta:{x:U.x,y:U.y},over:Ve};Rt.unstable_batchedUpdates(()=>{me?.(ke),w({type:"onDragMove",event:ke})})},[U.x,U.y]),h.useEffect(()=>{const{active:me,activatorEvent:Ce,collisions:De,droppableContainers:tt,scrollAdjustedTranslate:Ve}=pe.current;if(!me||K.current==null||!Ce||!Ve)return;const{onDragOver:ke}=te.current,Be=tt.get(lt),ut=Be&&Be.rect.current?{id:Be.id,rect:Be.rect.current,data:Be.data,disabled:Be.disabled}:null,ue={active:me,activatorEvent:Ce,collisions:De,delta:{x:Ve.x,y:Ve.y},over:ut};Rt.unstable_batchedUpdates(()=>{qt(ut),ke?.(ue),w({type:"onDragOver",event:ue})})},[lt]),Pe(()=>{pe.current={activatorEvent:q,active:T,activeNode:he,collisionRect:H,collisions:oe,droppableRects:ve,draggableNodes:O,draggingNode:P,draggingNodeRect:Z,droppableContainers:$,over:de,scrollableAncestors:c,scrollAdjustedTranslate:U},F.current={initial:Z,translated:H}},[T,he,oe,H,O,P,Z,ve,$,de,c,U]),Di({...Ne,delta:z,draggingRect:H,pointerCoordinates:S,scrollableAncestors:c,scrollableAncestorRects:d});const gs=h.useMemo(()=>({active:T,activeNode:he,activeNodeRect:W,activatorEvent:q,collisions:oe,containerNodeRect:Oe,dragOverlay:x,draggableNodes:O,droppableContainers:$,droppableRects:ve,over:de,measureDroppableContainers:Re,scrollableAncestors:c,scrollableAncestorRects:d,measuringConfiguration:ne,measuringScheduled:Ue,windowRect:Se}),[T,he,W,q,oe,Oe,x,O,$,ve,de,Re,c,d,ne,Ue,Se]),vs=h.useMemo(()=>({activatorEvent:q,activators:Ct,active:T,activeNodeRect:W,ariaDescribedById:{draggable:je},dispatch:R,draggableNodes:O,over:de,measureDroppableContainers:Re}),[q,Ct,T,W,R,je,O,de,Re]);return B.createElement(Kr.Provider,{value:A},B.createElement(Yt.Provider,{value:vs},B.createElement(as.Provider,{value:gs},B.createElement(yn.Provider,{value:jt},m)),B.createElement(Xi,{disabled:l?.restoreFocus===!1})),B.createElement(Ya,{...l,hiddenTextDescribedById:je}));function xs(){const me=G?.autoScrollEnabled===!1,Ce=typeof u=="object"?u.enabled===!1:u===!1,De=M&&!me&&!Ce;return typeof u=="object"?{...u,enabled:De}:{enabled:De}}}),Zi=h.createContext(null),Sr="button",Ji="Draggable";function Qi(e){let{id:t,data:n,disabled:s=!1,attributes:i}=e;const a=Xt(Ji),{activators:o,activatorEvent:l,active:u,activeNodeRect:m,ariaDescribedById:v,draggableNodes:f,over:p}=h.useContext(Yt),{role:j=Sr,roleDescription:k="draggable",tabIndex:b=0}=i??{},C=u?.id===t,R=h.useContext(C?yn:Zi),[w,A]=an(),[V,D]=an(),M=Pi(o,t),L=Mt(n);Pe(()=>(f.set(t,{id:t,key:a,node:w,activatorNode:V,data:L}),()=>{const z=f.get(t);z&&z.key===a&&f.delete(t)}),[f,t]);const O=h.useMemo(()=>({role:j,tabIndex:b,"aria-disabled":s,"aria-pressed":C&&j===Sr?!0:void 0,"aria-roledescription":k,"aria-describedby":v.draggable}),[s,j,b,C,k,v.draggable]);return{active:u,activatorEvent:l,activeNodeRect:m,attributes:O,isDragging:C,listeners:s?void 0:M,node:w,over:p,setNodeRef:A,setActivatorNodeRef:D,transform:R}}function os(){return h.useContext(as)}const eo="Droppable",to={timeout:25};function ls(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:i}=e;const a=Xt(eo),{active:o,dispatch:l,over:u,measureDroppableContainers:m}=h.useContext(Yt),v=h.useRef({disabled:n}),f=h.useRef(!1),p=h.useRef(null),j=h.useRef(null),{disabled:k,updateMeasurementsFor:b,timeout:C}={...to,...i},R=Mt(b??s),w=h.useCallback(()=>{if(!f.current){f.current=!0;return}j.current!=null&&clearTimeout(j.current),j.current=setTimeout(()=>{m(Array.isArray(R.current)?R.current:[R.current]),j.current=null},C)},[C]),A=pn({callback:w,disabled:k||!o}),V=h.useCallback((O,z)=>{A&&(z&&(A.unobserve(z),f.current=!1),O&&A.observe(O))},[A]),[D,M]=an(V),L=Mt(t);return h.useEffect(()=>{!A||!D.current||(A.disconnect(),f.current=!1,A.observe(D.current))},[D,A]),h.useEffect(()=>(l({type:ae.RegisterDroppable,element:{id:s,key:a,disabled:n,node:D,rect:p,data:L}}),()=>l({type:ae.UnregisterDroppable,key:a,id:s})),[s]),h.useEffect(()=>{n!==v.current.disabled&&(l({type:ae.SetDroppableDisabled,id:s,key:a,disabled:n}),v.current.disabled=n)},[s,a,n,l]),{active:o,rect:p,isOver:u?.id===s,node:D,over:u,setNodeRef:M}}function no(e){let{animation:t,children:n}=e;const[s,i]=h.useState(null),[a,o]=h.useState(null),l=on(n);return!n&&!s&&l&&i(l),Pe(()=>{if(!a)return;const u=s?.key,m=s?.props.id;if(u==null||m==null){i(null);return}Promise.resolve(t(m,a)).then(()=>{i(null)})},[t,s,a]),B.createElement(B.Fragment,null,n,s?h.cloneElement(s,{ref:o}):null)}const ro={x:0,y:0,scaleX:1,scaleY:1};function so(e){let{children:t}=e;return B.createElement(Yt.Provider,{value:ss},B.createElement(yn.Provider,{value:ro},t))}const ao={position:"fixed",touchAction:"none"},io=e=>xn(e)?"transform 250ms ease":void 0,oo=h.forwardRef((e,t)=>{let{as:n,activatorEvent:s,adjustScale:i,children:a,className:o,rect:l,style:u,transform:m,transition:v=io}=e;if(!l)return null;const f=i?m:{...m,scaleX:1,scaleY:1},p={...ao,width:l.width,height:l.height,top:l.top,left:l.left,transform:it.Transform.toString(f),transformOrigin:i&&s?Ja(s,l):void 0,transition:typeof v=="function"?v(s):v,...u};return B.createElement(n,{className:o,style:p,ref:t},a)}),lo=e=>t=>{let{active:n,dragOverlay:s}=t;const i={},{styles:a,className:o}=e;if(a!=null&&a.active)for(const[l,u]of Object.entries(a.active))u!==void 0&&(i[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,u));if(a!=null&&a.dragOverlay)for(const[l,u]of Object.entries(a.dragOverlay))u!==void 0&&s.node.style.setProperty(l,u);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[u,m]of Object.entries(i))n.node.style.setProperty(u,m);o!=null&&o.active&&n.node.classList.remove(o.active)}},co=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:it.Transform.toString(t)},{transform:it.Transform.toString(n)}]},uo={duration:250,easing:"ease",keyframes:co,sideEffects:lo({styles:{active:{opacity:"0"}}})};function fo(e){let{config:t,draggableNodes:n,droppableContainers:s,measuringConfiguration:i}=e;return vn((a,o)=>{if(t===null)return;const l=n.get(a);if(!l)return;const u=l.node.current;if(!u)return;const m=rs(o);if(!m)return;const{transform:v}=be(o).getComputedStyle(o),f=Hr(v);if(!f)return;const p=typeof t=="function"?t:ho(t);return Qr(u,i.draggable.measure),p({active:{id:a,data:l.data,node:u,rect:i.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(m)},droppableContainers:s,measuringConfiguration:i,transform:f})})}function ho(e){const{duration:t,easing:n,sideEffects:s,keyframes:i}={...uo,...e};return a=>{let{active:o,dragOverlay:l,transform:u,...m}=a;if(!t)return;const v={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/l.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/l.rect.height:1},p={x:u.x-v.x,y:u.y-v.y,...f},j=i({...m,active:o,dragOverlay:l,transform:{initial:u,final:p}}),[k]=j,b=j[j.length-1];if(JSON.stringify(k)===JSON.stringify(b))return;const C=s?.({active:o,dragOverlay:l,...m}),R=l.node.animate(j,{duration:t,easing:n,fill:"forwards"});return new Promise(w=>{R.onfinish=()=>{C?.(),w()}})}}let Cr=0;function mo(e){return h.useMemo(()=>{if(e!=null)return Cr++,Cr},[e])}const go=B.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:s,style:i,transition:a,modifiers:o,wrapperElement:l="div",className:u,zIndex:m=999}=e;const{activatorEvent:v,active:f,activeNodeRect:p,containerNodeRect:j,draggableNodes:k,droppableContainers:b,dragOverlay:C,over:R,measuringConfiguration:w,scrollableAncestors:A,scrollableAncestorRects:V,windowRect:D}=os(),M=h.useContext(yn),L=mo(f?.id),O=is(o,{activatorEvent:v,active:f,activeNodeRect:p,containerNodeRect:j,draggingNodeRect:C.rect,over:R,overlayNodeRect:C.rect,scrollableAncestors:A,scrollableAncestorRects:V,transform:M,windowRect:D}),z=qn(p),$=fo({config:s,draggableNodes:k,droppableContainers:b,measuringConfiguration:w}),I=z?C.setRef:void 0;return B.createElement(so,null,B.createElement(no,{animation:$},f&&L?B.createElement(oo,{key:L,id:f.id,ref:I,as:l,activatorEvent:v,adjustScale:t,className:u,transition:a,rect:z,style:{zIndex:m,...i},transform:O},n):null))});function cs(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function vo(e,t){return e.reduce((n,s,i)=>{const a=t.get(s);return a&&(n[i]=a),n},Array(e.length))}function Gt(e){return e!==null&&e>=0}function xo(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function po(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const ds=e=>{let{rects:t,activeIndex:n,overIndex:s,index:i}=e;const a=cs(t,s,n),o=t[i],l=a[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Zt={scaleX:1,scaleY:1},yo=e=>{var t;let{activeIndex:n,activeNodeRect:s,index:i,rects:a,overIndex:o}=e;const l=(t=a[n])!=null?t:s;if(!l)return null;if(i===n){const m=a[o];return m?{x:0,y:n<o?m.top+m.height-(l.top+l.height):m.top-l.top,...Zt}:null}const u=bo(a,i,n);return i>n&&i<=o?{x:0,y:-l.height-u,...Zt}:i<n&&i>=o?{x:0,y:l.height+u,...Zt}:{x:0,y:0,...Zt}};function bo(e,t,n){const s=e[t],i=e[t-1],a=e[t+1];return s?n<t?i?s.top-(i.top+i.height):a?a.top-(s.top+s.height):0:a?a.top-(s.top+s.height):i?s.top-(i.top+i.height):0:0}const us="Sortable",fs=B.createContext({activeIndex:-1,containerId:us,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ds,disabled:{draggable:!1,droppable:!1}});function wo(e){let{children:t,id:n,items:s,strategy:i=ds,disabled:a=!1}=e;const{active:o,dragOverlay:l,droppableRects:u,over:m,measureDroppableContainers:v}=os(),f=Xt(us,n),p=l.rect!==null,j=h.useMemo(()=>s.map(M=>typeof M=="object"&&"id"in M?M.id:M),[s]),k=o!=null,b=o?j.indexOf(o.id):-1,C=m?j.indexOf(m.id):-1,R=h.useRef(j),w=!xo(j,R.current),A=C!==-1&&b===-1||w,V=po(a);Pe(()=>{w&&k&&v(j)},[w,j,k,v]),h.useEffect(()=>{R.current=j},[j]);const D=h.useMemo(()=>({activeIndex:b,containerId:f,disabled:V,disableTransforms:A,items:j,overIndex:C,useDragOverlay:p,sortedRects:vo(j,u),strategy:i}),[b,f,V.draggable,V.droppable,A,j,C,u,p,i]);return B.createElement(fs.Provider,{value:D},t)}const jo=e=>{let{id:t,items:n,activeIndex:s,overIndex:i}=e;return cs(n,s,i).indexOf(t)},No=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:i,items:a,newIndex:o,previousItems:l,previousContainerId:u,transition:m}=e;return!m||!s||l!==a&&i===o?!1:n?!0:o!==i&&t===u},So={duration:200,easing:"ease"},hs="transform",Co=it.Transition.toString({property:hs,duration:0,easing:"linear"}),Do={roleDescription:"sortable"};function ko(e){let{disabled:t,index:n,node:s,rect:i}=e;const[a,o]=h.useState(null),l=h.useRef(n);return Pe(()=>{if(!t&&n!==l.current&&s.current){const u=i.current;if(u){const m=bt(s.current,{ignoreTransform:!0}),v={x:u.left-m.left,y:u.top-m.top,scaleX:u.width/m.width,scaleY:u.height/m.height};(v.x||v.y)&&o(v)}}n!==l.current&&(l.current=n)},[t,n,s,i]),h.useEffect(()=>{a&&o(null)},[a]),a}function _o(e){let{animateLayoutChanges:t=No,attributes:n,disabled:s,data:i,getNewIndex:a=jo,id:o,strategy:l,resizeObserverConfig:u,transition:m=So}=e;const{items:v,containerId:f,activeIndex:p,disabled:j,disableTransforms:k,sortedRects:b,overIndex:C,useDragOverlay:R,strategy:w}=h.useContext(fs),A=Eo(s,j),V=v.indexOf(o),D=h.useMemo(()=>({sortable:{containerId:f,index:V,items:v},...i}),[f,i,V,v]),M=h.useMemo(()=>v.slice(v.indexOf(o)),[v,o]),{rect:L,node:O,isOver:z,setNodeRef:$}=ls({id:o,data:D,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...u}}),{active:I,activatorEvent:F,activeNodeRect:T,attributes:K,setNodeRef:G,listeners:Q,isDragging:q,over:Ee,setActivatorNodeRef:te,transform:je}=Qi({id:o,data:D,attributes:{...Do,...n},disabled:A.draggable}),Ae=Ta($,G),ne=!!I,ve=ne&&!k&&Gt(p)&&Gt(C),Re=!R&&q,Ue=Re&&ve?je:null,Te=ve?Ue??(l??w)({rects:b,activeNodeRect:T,activeIndex:p,overIndex:C,index:V}):null,Ne=Gt(p)&&Gt(C)?a({id:o,items:v,activeIndex:p,overIndex:C}):V,xe=I?.id,W=h.useRef({activeId:xe,items:v,newIndex:Ne,containerId:f}),Oe=v!==W.current.items,pe=t({active:I,containerId:f,isDragging:q,isSorting:ne,id:o,index:V,items:v,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:m,wasDragging:W.current.activeId!=null}),Le=ko({disabled:!pe,index:V,node:O,rect:L});return h.useEffect(()=>{ne&&W.current.newIndex!==Ne&&(W.current.newIndex=Ne),f!==W.current.containerId&&(W.current.containerId=f),v!==W.current.items&&(W.current.items=v)},[ne,Ne,f,v]),h.useEffect(()=>{if(xe===W.current.activeId)return;if(xe!=null&&W.current.activeId==null){W.current.activeId=xe;return}const P=setTimeout(()=>{W.current.activeId=xe},50);return()=>clearTimeout(P)},[xe]),{active:I,activeIndex:p,attributes:K,data:D,rect:L,index:V,newIndex:Ne,items:v,isOver:z,isSorting:ne,isDragging:q,listeners:Q,node:O,overIndex:C,over:Ee,setNodeRef:Ae,setActivatorNodeRef:te,setDroppableNodeRef:$,setDraggableNodeRef:G,transform:Le??Te,transition:x()};function x(){if(Le||Oe&&W.current.newIndex===V)return Co;if(!(Re&&!xn(F)||!m)&&(ne||pe))return it.Transition.toString({...m,property:hs})}}function Eo(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}Y.Down,Y.Right,Y.Up,Y.Left;function ms({lead:e,onClick:t}){const{attributes:n,listeners:s,setNodeRef:i,transform:a,transition:o,isDragging:l}=_o({id:e.id,disabled:!1}),u={transform:it.Transform.toString(a),transition:o};return r.jsx("div",{ref:i,style:u,className:tn("vintage-card p-4 mb-3 group","cursor-grab active:cursor-grabbing","hover:shadow-lg transition-all duration-200","border-2 border-border bg-card",l&&"opacity-50 shadow-2xl scale-105 cursor-grabbing"),children:r.jsxs("div",{...n,...s,className:"flex items-start gap-3",children:[r.jsx(na,{className:"h-5 w-5 text-muted-foreground/40 group-hover:text-muted-foreground/70 flex-shrink-0 mt-0.5 transition-colors"}),r.jsxs("div",{className:"flex-1 min-w-0",onClick:t,children:[r.jsx("h3",{className:"font-display font-bold text-foreground mb-1 line-clamp-1",children:e.contact_name}),e.company_name&&r.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-1",children:e.company_name}),r.jsxs("div",{className:"space-y-1.5 mb-3",children:[e.email&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(vt,{className:"h-3 w-3 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:e.email})]}),e.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(xt,{className:"h-3 w-3 flex-shrink-0"}),r.jsx("span",{children:e.phone})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-3 border-t border-border",children:r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[r.jsx(Mn,{className:"h-3 w-3"}),r.jsx("span",{children:Is(new Date(e.created_at),"d. M. yyyy",{locale:Ss})})]})})]})]})})}const Dr={new:{borderColor:"border-l-blue-500",badgeVariant:"new"},contacted:{borderColor:"border-l-purple-500",badgeVariant:"contacted"},offer:{borderColor:"border-l-orange-500",badgeVariant:"offer"},won:{borderColor:"border-l-emerald-500",badgeVariant:"won"},lost:{borderColor:"border-l-red-500",badgeVariant:"default"},waiting:{borderColor:"border-l-yellow-500",badgeVariant:"default"}};function Ao({status:e,label:t,color:n,leads:s,onCardClick:i}){const{setNodeRef:a,isOver:o}=ls({id:e}),l=Dr[e]||Dr.new;return r.jsx("div",{className:"flex-shrink-0 w-72",children:r.jsxs("div",{className:tn("vintage-card border-l-4 border-t-0 border-r-0 border-b-0 flex flex-col",l.borderColor,o&&"ring-2 ring-primary"),children:[r.jsx("div",{className:"bg-card border-b border-border px-3 py-2.5",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("h3",{className:"font-semibold text-sm text-foreground uppercase tracking-wide truncate",children:t}),r.jsx(gt,{variant:l.badgeVariant,className:"shrink-0 h-6 min-w-[2rem] flex items-center justify-center font-semibold",children:s.length})]})}),r.jsx("div",{ref:a,className:"flex-1 p-3 overflow-y-auto max-h-[calc(100vh-200px)]",children:r.jsx(wo,{items:s.map(u=>u.id),strategy:yo,children:s.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[r.jsx("p",{children:"Žiadne leady"}),r.jsx("p",{className:"text-xs mt-1",children:"Presuňte sem lead"})]}):s.map(u=>r.jsx(ms,{lead:u,onClick:()=>i(u)},u.id))})})]})})}const Jt=[{value:"new",label:"Nový",color:"blue"},{value:"contacted",label:"Kontaktovaný",color:"purple"},{value:"offer",label:"Ponuka",color:"orange"},{value:"won",label:"Úspešný",color:"emerald"},{value:"lost",label:"Stratený",color:"red"}],Ro={new:"Nový",contacted:"Kontaktovaný",offer:"Ponuka",won:"Vyhraný",lost:"Stratený",waiting:"Čaká sa"},Lo={facebook_lead_ads:"Facebook Lead Ads",facebook_ads:"Facebook Ads",google_ads:"Google Ads",website_form:"Web formulár",manual:"Manuálne"};function Vo(){const{data:e=[],isLoading:t}=Er({}),n=Ar(),[s,i]=h.useState(null),[a,o]=h.useState(null),[l,u]=h.useState(!1),m=Ga(qa(Yn,{activationConstraint:{distance:8}})),v=k=>{const b=e.find(C=>C.id===k.active.id);o(b||null)},f=k=>{const{active:b,over:C}=k;if(o(null),console.log("🔍 DragEnd Debug:",{activeId:b.id,activeType:typeof b.id,overId:C?.id,overType:typeof C?.id,overData:C?.data}),!C||b.id===C.id)return;const R=b.id;let w=C.id;if(w.length>10&&w.includes("-")){console.log("⚠️ Detected UUID as drop target, looking up column status...");const D=e.find(M=>M.id===w);if(D)w=D.status,console.log(`✅ Mapped UUID to status: ${w}`);else{console.error("❌ Could not find lead with UUID:",w),ge.error("Chyba: Neplatný cieľ presunu");return}}const A=e.find(D=>D.id===R);if(!A)return;if(A.status===w){console.log("ℹ️ Lead already in this column, skipping");return}const V=e.filter(D=>D.status===w).length;console.log("🎯 Dragging lead to column:",{leadId:R,leadName:A.contact_name,oldStatus:A.status,newStatus:w,newStatusIsUUID:w.length>10&&w.includes("-"),currentLeadsInColumn:V}),n.mutate({leadId:R,status:w},{onSuccess:()=>{console.log("✅ Status update successful"),ge.success(`Lead presunutý do stĺpca "${Jt.find(D=>D.value===w)?.label}"`)},onError:D=>{console.error("❌ Failed to update lead status:",{error:D,message:D?.message,code:D?.code,details:D?.details,hint:D?.hint}),ge.error(`Nepodarilo sa: ${D?.message||"Neznáma chyba"}`)}})},p=k=>{i(k),u(!0)};if(t)return r.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:Jt.map(k=>r.jsx("div",{className:"flex-shrink-0 w-72",children:r.jsx(Tn,{className:"h-[600px] rounded-lg"})},k.value))});const j=Jt.reduce((k,b)=>(k[b.value]=e.filter(C=>C.status===b.value),k),{});return r.jsxs(r.Fragment,{children:[r.jsxs(Gi,{sensors:m,collisionDetection:ni,onDragStart:v,onDragEnd:f,children:[r.jsx("div",{className:"flex gap-1 overflow-x-auto pt-4 pr-4",children:Jt.map(k=>r.jsx(Ao,{status:k.value,label:k.label,color:k.color,leads:j[k.value]||[],onCardClick:p},k.value))}),r.jsx(go,{children:a?r.jsx("div",{className:"rotate-3",children:r.jsx(ms,{lead:a,onClick:()=>{}})}):null})]}),s&&r.jsx(Ur,{lead:s,open:l,onOpenChange:u,statusLabels:Ro,sourceLabels:Lo,getRegionName:()=>""})]})}function Fo({view:e,onViewChange:t}){return r.jsxs("div",{className:"inline-flex rounded-lg border border-border bg-background p-1",children:[r.jsxs(ie,{variant:"ghost",size:"sm",onClick:()=>t("table"),className:tn("gap-2 rounded-md px-3",e==="table"&&"bg-muted shadow-sm"),children:[r.jsx(ia,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Tabuľka"})]}),r.jsxs(ie,{variant:"ghost",size:"sm",onClick:()=>t("kanban"),className:tn("gap-2 rounded-md px-3",e==="kanban"&&"bg-muted shadow-sm"),children:[r.jsx(sa,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Kanban"})]})]})}const At={new:"Nový",contacted:"Kontaktovaný",offer:"Ponuka",won:"Vyhraný",lost:"Stratený",waiting:"Čaká sa"},Qt={facebook_lead_ads:"Facebook Lead Ads",facebook_ads:"Facebook Ads",google_ads:"Google Ads",website_form:"Web formulár",manual:"Manuálne"},To={facebook_lead_ads:r.jsx(er,{className:"h-4 w-4"}),facebook_ads:r.jsx(er,{className:"h-4 w-4"}),google_ads:r.jsx(En,{className:"h-4 w-4"}),website_form:r.jsx(En,{className:"h-4 w-4"}),manual:r.jsx(Zs,{className:"h-4 w-4"})};function Qo(){const{user:e}=ps(),t=kr(),[n,s]=h.useState(""),[i,a]=h.useState("all"),[o,l]=h.useState("all"),[u,m]=h.useState("all"),[v,f]=h.useState(()=>{const x=localStorage.getItem("artstone-leads-view");return x==="kanban"||x==="table"?x:"table"}),[p,j]=h.useState(null),[k,b]=h.useState(!1),[C,R]=h.useState(!1),[w,A]=h.useState(!1),[V,D]=h.useState(!1),[M,L]=h.useState(!1),[O,z]=h.useState("note");h.useEffect(()=>{localStorage.setItem("artstone-leads-view",v)},[v]);const{data:$=[],isLoading:I,isError:F,error:T}=Er(),{data:K=[]}=On(),{data:G=[]}=Lr(),{data:Q=[]}=Ms(),q=Ar(),Ee=As(),te=e?.role==="admin",je=e?.role==="manager";if(F)return r.jsx(Zn,{title:"Leady",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"bg-destructive/15 text-destructive p-4 rounded-md border border-destructive/20",children:[r.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Chyba pri načítaní leadov"}),r.jsx("p",{children:"Nepodarilo sa načítať zoznam leadov z databázy."}),r.jsx("pre",{className:"mt-2 text-xs bg-black/5 p-2 rounded overflow-auto",children:JSON.stringify(T,null,2)}),r.jsx("p",{className:"mt-4 text-sm text-foreground",children:'Skontrolujte "RLS Policies" v Supabase dashboarde.'})]})})});const Ae=$.filter(x=>{const P=x.contact_name?.toLowerCase().includes(n.toLowerCase())||x.email?.toLowerCase().includes(n.toLowerCase())||x.company_name?.toLowerCase().includes(n.toLowerCase()),Z=i==="all"||x.status===i,et=o==="all"||x.source_type===o,ot=u==="all"||x.created_by===u;return P&&Z&&et&&ot}),ne=x=>x&&K.find(Z=>Z.id===x)?.name||"Neurčený",ve=x=>x&&G.find(Z=>Z.id===x)?.full_name||"—",Re=x=>x.created_by_user?x.created_by_user.full_name:x.created_by&&(Q.find(Z=>Z.id===x.created_by)||G.find(Z=>Z.id===x.created_by))?.full_name||"—",Ue=async(x,P)=>{try{await q.mutateAsync({leadId:x,status:P}),ge.success("Status leadu bol aktualizovaný")}catch{ge.error("Nepodarilo sa aktualizovať status")}},he=async x=>{if(confirm("Naozaj chcete vymazať tento lead?"))try{await Ee.mutateAsync(x),ge.success("Lead bol vymazaný")}catch{ge.error("Nepodarilo sa vymazať lead")}},Te=x=>{j(x),b(!0)},Ne=x=>{j(x),R(!0)},xe=x=>{j(x),A(!0)},W=x=>{j(x),D(!0)},Oe=(x,P,Z)=>{Z?.stopPropagation(),j(x),z(P),L(!0)},pe=x=>{ge.info(`Presmerovanie na vytvorenie ponuky pre ${x.contact_name}`),t(`/quotes?leadId=${x.id}&action=new`)};$.filter(x=>x.status==="new").length,$.filter(x=>x.status==="contacted").length,$.filter(x=>x.status==="offer").length,$.filter(x=>x.status==="won").length;const Le=x=>{const P=["Meno","Firma","Email","Telefón","Zdroj","Status","Región","Priradené","Vytvoril","Vytvorené","Poznámka"],Z=x.map(d=>[d.contact_name,d.company_name||"",d.email||"",d.phone||"",Qt[d.source_type],At[d.status],ne(d.region_id),ve(d.assigned_user_id),Re(d),new Date(d.created_at).toLocaleDateString("sk-SK"),d.notes||""]),et=[P.join(","),...Z.map(d=>d.map(g=>`"${g}"`).join(","))].join(`
`),ot=new Blob([et],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a"),c=URL.createObjectURL(ot);Se.setAttribute("href",c),Se.setAttribute("download",`leads_export_${new Date().toISOString().split("T")[0]}.csv`),Se.style.visibility="hidden",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)};return r.jsx(Zn,{title:"Leady",children:r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[r.jsxs("div",{className:"flex flex-1 gap-3",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Cs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),r.jsx(Qe,{placeholder:"Hľadať podľa mena, emailu, firmy...",value:n,onChange:x=>s(x.target.value),className:"pl-9"})]}),r.jsxs(He,{value:i,onValueChange:a,children:[r.jsx(Xe,{className:"w-40",children:r.jsx(Ye,{placeholder:"Status"})}),r.jsxs(qe,{children:[r.jsx(X,{value:"all",children:"Všetky statusy"}),Object.entries(At).map(([x,P])=>r.jsx(X,{value:x,children:P},x))]})]}),r.jsxs(He,{value:o,onValueChange:l,children:[r.jsx(Xe,{className:"w-44",children:r.jsx(Ye,{placeholder:"Zdroj"})}),r.jsxs(qe,{children:[r.jsx(X,{value:"all",children:"Všetky zdroje"}),Object.entries(Qt).map(([x,P])=>r.jsx(X,{value:x,children:P},x))]})]}),r.jsxs(He,{value:u,onValueChange:m,children:[r.jsx(Xe,{className:"w-44",children:r.jsx(Ye,{placeholder:"Vytvoril"})}),r.jsxs(qe,{children:[r.jsx(X,{value:"all",children:"Všetci obchodníci"}),Q.length>0?Q.map(x=>r.jsx(X,{value:x.id,children:x.full_name},x.id)):G.map(x=>r.jsx(X,{value:x.id,children:x.full_name},x.id))]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Fo,{view:v,onViewChange:f}),(te||je)&&r.jsxs(r.Fragment,{children:[r.jsx(ie,{variant:"outline",size:"icon",onClick:()=>Le(Ae),className:"md:hidden min-h-[44px] min-w-[44px]",title:"Export",children:r.jsx(Qn,{className:"h-4 w-4"})}),r.jsxs(ie,{variant:"outline",onClick:()=>Le(Ae),className:"hidden md:flex",children:[r.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Export"]})]}),r.jsx(Aa,{})]})]}),v==="kanban"?r.jsx(Vo,{}):r.jsx(ys,{className:"shadow-soft",children:r.jsx(bs,{className:"p-0",children:I?r.jsx("div",{className:"p-6 space-y-4",children:[1,2,3,4,5].map(x=>r.jsx(Tn,{className:"h-16 w-full"},x))}):r.jsxs(Ps,{children:[r.jsx(zs,{children:r.jsxs(jn,{children:[r.jsx(Ze,{children:"Kontakt"}),r.jsx(Ze,{children:"Zdroj"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Región"}),r.jsx(Ze,{children:"Priradené"}),r.jsx(Ze,{children:"Vytvoril"}),r.jsx(Ze,{children:"Dátum"}),r.jsx(Ze,{className:"w-28",children:"Akcie"}),r.jsx(Ze,{className:"w-12"})]})}),r.jsx(Us,{children:Ae.length===0?r.jsx(jn,{children:r.jsx(Ke,{colSpan:7,className:"p-0",children:r.jsx(EmptyState,{icon:r.jsx(Inbox,{className:"h-full w-full"}),title:"Zatiaľ žiadne leady",description:"Začnite pridávať leadov alebo nastavte integráciu pre automatický import.",action:{label:"Vytvoriť prvý lead",onClick:()=>setCreateDialogOpen(!0),icon:r.jsx(nn,{className:"h-4 w-4"})}})})}):Ae.map(x=>r.jsxs(jn,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Te(x),children:[r.jsx(Ke,{children:r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium text-foreground",children:x.contact_name}),x.duplicate_of_lead_id&&r.jsx(gt,{variant:"warning",className:"text-xs",children:"Duplicita"})]}),x.company_name&&r.jsx("p",{className:"text-sm text-muted-foreground",children:x.company_name}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[x.email&&r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(vt,{className:"h-3 w-3"}),x.email]}),x.phone&&r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(xt,{className:"h-3 w-3"}),x.phone]})]})]})})}),r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-muted-foreground",children:To[x.source_type]}),r.jsx("span",{className:"text-sm",children:Qt[x.source_type]})]})}),r.jsx(Ke,{children:r.jsx(gt,{variant:x.status,children:At[x.status]})}),r.jsx(Ke,{children:r.jsx("span",{className:"text-sm",children:ne(x.region_id)})}),r.jsx(Ke,{children:r.jsx("span",{className:"text-sm text-muted-foreground",children:ve(x.assigned_user_id)})}),r.jsx(Ke,{children:r.jsx("span",{className:"text-sm",children:Re(x)})}),r.jsx(Ke,{children:r.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(x.created_at).toLocaleDateString("sk-SK")})}),r.jsx(Ke,{onClick:P=>P.stopPropagation(),children:r.jsxs("div",{className:"flex items-center gap-1",children:[x.phone&&r.jsx(ie,{variant:"ghost",size:"icon-sm",onClick:P=>Oe(x,"call",P),className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:"Zavolať",children:r.jsx(xt,{className:"h-3.5 w-3.5"})}),x.email&&r.jsx(ie,{variant:"ghost",size:"icon-sm",onClick:P=>Oe(x,"email",P),className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:"Poslať email",children:r.jsx(vt,{className:"h-3.5 w-3.5"})}),r.jsx(ie,{variant:"ghost",size:"icon-sm",onClick:P=>Oe(x,"note",P),className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:"Pridať poznámku",children:r.jsx(nn,{className:"h-3.5 w-3.5"})})]})}),r.jsx(Ke,{children:r.jsx("div",{onClick:P=>P.stopPropagation(),children:r.jsxs(Bs,{children:[r.jsx($s,{asChild:!0,children:r.jsx(ie,{variant:"ghost",size:"icon-sm",children:r.jsx(Rs,{className:"h-4 w-4"})})}),r.jsxs(Ks,{align:"end",children:[r.jsx(ct,{onClick:()=>Te(x),children:"Zobraziť detail"}),r.jsxs(ct,{onClick:()=>xe(x),children:[r.jsx(Js,{className:"mr-2 h-4 w-4"}),"Upraviť"]}),r.jsx(ct,{onClick:()=>Ne(x),children:"Priradiť"}),r.jsxs(Ws,{children:[r.jsx(Hs,{children:"Zmeniť status"}),r.jsx(Xs,{children:r.jsx(Ys,{value:x.status,onValueChange:P=>{Ue(x.id,P)},children:Object.entries(At).map(([P,Z])=>r.jsx(qs,{value:P,children:Z},P))})})]}),r.jsx(ct,{onClick:()=>pe(x),children:"Vytvoriť ponuku"}),(x.status==="offer"||x.status==="won")&&!x.converted_to_client_id&&r.jsx(ct,{onClick:()=>W(x),children:"Konvertovať na klienta"}),(te||je)&&r.jsx(ct,{onClick:()=>Le([x]),children:"Exportovať"}),te&&r.jsxs(r.Fragment,{children:[r.jsx(Gs,{}),r.jsx(ct,{className:"text-destructive",onClick:()=>he(x.id),children:"Vymazať"})]})]})]})})})]},x.id))})]})})}),r.jsx(Ur,{lead:p,open:k,onOpenChange:b,statusLabels:At,sourceLabels:Qt,getRegionName:ne,onEdit:()=>{b(!1),A(!0)}}),r.jsx(Va,{lead:p,open:w,onOpenChange:A}),r.jsx(La,{lead:p,open:C,onOpenChange:R}),r.jsx(Fa,{lead:p,open:V,onOpenChange:D}),r.jsx(Os,{open:M,onOpenChange:L,entityType:"lead",entityId:p?.id||"",entityName:p?.contact_name,defaultType:O,defaultContact:{email:p?.email||void 0,phone:p?.phone||void 0}})]})})}export{Qo as default};
